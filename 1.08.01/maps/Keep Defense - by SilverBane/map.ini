;; ---------------------------------------------------------------------------------
;;   Keep Defense by SilverBane`
;; ---------------------------------------------------------------------------------

;SCRIPTED BY SILVERBANE` 1.07.2014 (1st July 2014) - DO NOT MODIFY


Weather

  HardwareFogColor = R:246 G:240 B:212

  HardwareFogEnable = No

  HardwareFogStart = 725

  HardwareFogEnd = 2000


End

;-----------------------------------------------------------------

AIData

  LowLodTreeName = TreeLowLODGreyHavens

END

;-----------------------------------------------------------------



;VITAL FOR SURVIVING - THIS MAKES THIS OBJECT ACT LIKE A FORTRESS SO YOU CAN USE POWERS, SURVIVE ETC

Object Tower_FromZeroHourThatCanTopple
	KindOf = IMMOBILE BASE_FOUNDATION CASTLE_CENTER CAN_CAST_REFLECTIONS CASTLE_KEEP COMMANDCENTER PRELOAD STRUCTURE SELECTABLE SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION MADE_OF_STONE LIVING_WORLD_BUILDING_MIRROR
End

Object GondorRanger_Summoned ; these are the guys from the top of the walls wich always guard

RemoveModule ModuleTag_LifetimeUpdate
KindOf = PRELOAD SELECTABLE UNATTACKABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ARCHER

CommandPoints = 0 


	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = 0
	End

End



PlayerTemplate FactionCivilian  ; makes ai able to fire spells
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

















PlayerTemplate FactionMen
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionElves
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionDwarves
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionIsengard
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End



PlayerTemplate FactionWild
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End


PlayerTemplate FactionMordor
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End


;===============for the spellbook






Science SCIENCE_Fury
PrerequisiteSciences = SCIENCE_EVIL
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End




Science SCIENCE_Narya
PrerequisiteSciences = SCIENCE_GOOD
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End




Science SCIENCE_Lottery
PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End



SpecialPower SpellBookFury
	Enum				= SPECIAL_SPELL_BOOK_FUEL_THE_FIRES
	RequiredSciences		= SCIENCE_Fury
	ReloadTime      		= 520000 ; in milliseconds

End


SpecialPower SpellBookNarya
	Enum				= SPECIAL_SPELL_BOOK_CLOUD_BREAK
	RequiredSciences		= SCIENCE_Narya
	ReloadTime      		= 520000 ; in milliseconds

End


SpecialPower SpellBookLottery
	Enum				= SPECIAL_SPELL_BOOK_EYE_OF_SAURON
	RequiredSciences		= SCIENCE_Lottery
	ReloadTime      		= 200000 ; in milliseconds - reduced cooldown

End


ModifierList FuryBonus
	Category = LEVEL
	Modifier = DAMAGE_MULT    200% ; +100% damage
	Duration = 45000	        ; 45s			
End


ModifierList NaryaBonus
	Category = LEVEL
	Modifier = ARMOR    75% ; +50 armor
	Modifier = RATE_OF_FIRE   150% ; +50% attack speed
	Duration = 45000	        ; 45s			
End




CommandButton Command_SpellBookCalltheHorde          ;fury
	Command				= SPELL_BOOK
	SpecialPower		= SpellBookFury
	TextLabel			= CONTROLBAR:SoSBonus
	DescriptLabel		= CONTROLBAR:TooltipSoSBonus   
	ButtonImage			= SBEvil_CalltheHorde
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= CaH_BerserkerRage
End



CommandButton Command_SpecialAbilityIgnite              ; narya
	Command				= SPELL_BOOK
	SpecialPower		= SpellBookNarya
	TextLabel			= CONTROLBAR:FoLBonus
	DescriptLabel		= CONTROLBAR:TooltipFoLBonus   
	ButtonImage			= HSBalrogIgnite
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= GenericSpell
End


CommandButton Command_LurtzPillage                 ;lottery
  Command                 = SPELL_BOOK
  SpecialPower            = SpellBookLottery
	TextLabel			= CONTROLBAR:Lottery
	DescriptLabel		= CONTROLBAR:TooltipLottery
	ButtonImage			= HSBalrogIgnite
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= GUI_GollumHappy ; lol
End




CommandSet FortressDefenseSpellBookCommandSet
	1 = Command_SpellBookScavenger
        2 = Command_SpellBookHeal
        3 = Command_SpecialAbilityIgnite
        4 = Command_SpellBookCalltheHorde
        5 = Command_SpellBookWarChant
        6 = Command_SpellBookBombard
        7 = Command_SpellBookCloudBreak
        8 = Command_SpellBookFreezingRain
        9 = Command_SpellBookDarkness 
       10 = Command_SpellBookEnshroudingMist
       11 = Command_LurtzPillage

End

CommandSet FortressDefenseSpellStoreCommandSet ; this is generic, don't try to activate the spellstore ( remove the script), or you will get GAMEDAT.error
	1 = Command_PurchaseSpellHeal
        4 = Command_PurchaseSpellScavenger
        
End















;TESTING REASON!!!!

SpecialPower SpellBookRainOfFire
	Enum			= SPECIAL_SPELL_BOOK_RAIN_OF_FIRE
	RadiusCursorRadius	= 200
	RequiredSciences		= SCIENCE_RainOfFire
	ReloadTime		= 100 ;SPELL_RECHARGE_TIME_TIER_4 ; in milliseconds
	InitiateSound = SpellRainOfFireMS
	ViewObjectDuration = 10000
	ViewObjectRange = 200
	Flags			= RESPECT_RECHARGE_TIME_DISCOUNT
End
 ;;;;;;;;






Object FortressDefenseSpellBook


CommandSet          = FortressDefenseSpellBookCommandSet
RadarPriority       = NOT_ON_RADAR
KindOf              = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT








   AddModule 
	Behavior = SpecialPowerModule		SpellBookLottery_ModuleTag
		SpecialPowerTemplate		= SpellBookLottery
		UpdateModuleStartsAttack	= No
		AffectAllies			= No ; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   END




AddModule
	Behavior = SpecialPowerModule		SpellBookWarChant_ModuleTag
		SpecialPowerTemplate		= SpellBookWarChant
		AttributeModifier			= SpellBookWarChant
		AttributeModifierRange		= 110
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		TriggerFX					= FX_SpellWarChant
		UpdateModuleStartsAttack	= No
		AvailableAtStart			= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End



AddModule                       ; for special AI                 ; he fires this constantly to areas where creeps exit to prevent lag ( he kills creeps that left map)
  	Behavior = OCLSpecialPower ModuleTag_RainOfFire
		SpecialPowerTemplate = SpellBookRainOfFire
		OCL                  = OCL_SpellBookRainOfFire
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End






AddModule ModuleTag_Heal ;; added just in case it fully heals now
  	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY SHIP DOZER 
		HealAmount			  = 1.0 
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN	
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
END

AddModule
	Behavior = ScavengerSpecialPower ModuleTag_Scavenger
		SpecialPowerTemplate	= SpellBookScavenger
		BountyPercent			= 1.0
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End





   AddModule 
	Behavior = SpecialPowerModule		ModuleTag_Fury
		SpecialPowerTemplate		= SpellBookFury
		UpdateModuleStartsAttack	= No
		AttributeModifier			= FuryBonus
		AttributeModifierRange		= 99999999.0 ; basically on the whole map
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		AffectAllies			= No; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   End

   AddModule 
	Behavior = SpecialPowerModule		ModuleTag_Narya
		SpecialPowerTemplate		= SpellBookNarya
		UpdateModuleStartsAttack	= No
		AttributeModifier			= NaryaBonus
		AttributeModifierRange		= 99999999.0 ; basically on the whole map
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		AffectAllies			= No; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   End



AddModule
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookEvilBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
 	Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 450000
		ChangeWeather					= CLOUDY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End





AddModule
	Behavior = FreezingRainSpecialPower ModuleTag_FreezingRain
		SpecialPowerTemplate			= SpellBookFreezingRain
		AttributeModifier				= RainDebuff ; ;
		AttributeModifierAffects		= ALL ENEMIES
		AntiCategory					= LEADERSHIP BUFF ; ;
;		AntiFX							= FX_AntiLeadership ; FX for anti category
		AttributeModifierWeatherBased	= Yes
		WeatherDuration					= 700000
		ChangeWeather					= RAINY
		AvailableAtStart				= No
		BurnRateModifier				= -100
		BurnDecayModifier				= 20
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
	Behavior = OCLSpecialPower ModuleTag_EnshroudingMist
		SpecialPowerTemplate = SpellBookEnshroudingMist
		OCL                  = OCL_SpecialPowerEnshroudingMist
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

END
















;================================Fortress gate

Armor KeepGatesArmor

  Armor = DEFAULT         0%     ;this sets the level for all nonspecified damage types


  Armor = CRUSH          35%     ;fire damage
  Armor = HERO            60%     ;fire damage
  Armor = SPECIALIST      40%     ;fire damage
  Armor = URUK            35%     ;fire damage
  Armor = SLASH           30%     ;fire damage
  Armor = FLAME           10%     ;fire damage
  Armor = SIEGE          100%     ;siege damage
  Armor = STRUCTURAL     25%     ;structural damage - Grond inflicts this kind of damage
  Armor = MAGIC          15%     ;in case Gandalf or Saruman attack
  Armor = FORCE          45%     ;in case Gandalf or Saruman attack
  Armor = LOGICAL_FIRE	  0%	 ;Fire
End

CommandSet NewGateCommandSet
	1 = Command_ToggleGate
	2 = Command_StartSelfRepair
End


Object MordorCirithUngolGateDoor



ReplaceModule ModuleTag_Draw

  Draw = W3DScriptedModelDraw ModuleTag_DrawNew
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = MBCUGateDr
    End





      ModelConditionState  = RUBBLE
      Model         = RBHDGatDr_D3  
    End
 	AnimationState = RUBBLE 
		Animation = Open 
			AnimationName	=	RBHDGatDr_D3.RBHDGatDr_D3
			AnimationMode	=	ONCE 
		End
    End



        
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End
End





	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE WALL_GATE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP
	RadarPriority = NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes




  ArmorSet
    Conditions        = None
    Armor             = KeepGatesArmor
    DamageFX          = None
  End


	CommandSet = NewGateCommandSet



AddModule
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer					= -1.0							; Negative means no 'autoheal'
		RebuildTimeSeconds			= 40
	End
End


RemoveModule ModuleTag_SlowDeathWithoutRubble


AddModule
	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
End




AddModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
End



AddModule
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 300.0
		TriggerWidthY = 150.0
	End
End


ReplaceModule ModuleTag_02
	Body                  = ActiveBody ModuleTag_02New
		MaxHealth       = 15000.0
	End
End



END


;--------------------WELL


Object DaleFountain


	KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS UNATTACKABLE ; added unattackable


AddModule
	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
		EffectRadius			= GONDOR_WELL_AOE_RADIUS
		PingDelay				= 2000;msec
		HealPercentPerSecond	= 4% ; ;3%
		AllowFilter				= ANY +INFANTRY +CAVALRY +HERO +MACHINE +MONSTER -IMMOBILE +DOZER
		NonStackable			= Yes
		HealFX					= FX_SpellHealUnitHealBuff
	End
End

	/////////////////////////////////////////////////////////
	// BannerCarrierUpdate module for Well Object
	/////////////////////////////////////////////////////////
AddModule
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 7000 ; ;5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde	= Yes
		ScanHordeDistance		= 200
	End
End




END


;-------------------------------------------------------------------

Armor HaradrimArmor
  Armor = DEFAULT         100%   ; 100%
  Armor = SLASH           100%   ; 100%
  Armor = PIERCE           25%   ;  50%
  Armor = SPECIALIST      100%   ;  50%
  Armor = CRUSH           200%   ; 200%
  Armor = CAVALRY	  200% ;
  Armor = SIEGE           100%   ;
  Armor = FLAME           100%   ;  30%
  Armor = MAGIC           100%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     100%   ; 
  Armor = STRUCTURAL    100%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End




Object MordorHaradrimArcherHorde
BuildCost = 450
End






Weapon HaradrimPalaceBow       ; BALANCE Archer Weapon
  AttackRange               = 300
  WeaponSpeed               = 321       ; dist/sec 
  MinWeaponSpeed            = 241
  MaxWeaponSpeed            = 481		; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX                    = FX_RohanArcherBowWeapon
  ScaleWeaponSpeed          = Yes		; Used for lob weapons, scales speed proportional to range
  HitPercentage             = 100		;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius             = 16.0		;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots         = 20
  PreAttackDelay            = 20   ; 1467 is the prep time for archer.
  PreAttackType             = PER_SHOT	; Do the delay each time we attack a new target
  FiringDuration            = 10    ; Duration of the archer firing shot is 500ms.
  IsAimingWeapon            = Yes
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes
  HitPassengerPercentage	= 20%
  AcceptableAimDelta		= 180.0	; We want to be able to shoot all round, as we canit move.

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent


  ProjectileNugget          ; Default arrow
    ProjectileTemplateName  = EvilFactionArrow
    WarheadTemplateName     = FortressArrowTowerBowWarhead
    ForbiddenUpgradeNames	= Upgrade_MordorHaradrimPalaceLevel3
  End
  ProjectileNugget          ; Default arrow
    ProjectileTemplateName  = EvilFactionFireArrow
    WarheadTemplateName     = FortressArrowTowerBowUpgradedWarhead
    RequiredUpgradeNames	= Upgrade_MordorHaradrimPalaceLevel3
  End

End




;=========================
;fixing bug not giving money

Object IsengardSharku
BountyValue = 350
End

Object IsengardLurtz
BountyValue = 300
End

;====================


Object BarrowWight
	LocomotorSet
		Locomotor = BarrowWightLocomotor
		Condition = SET_NORMAL
		Speed     = 41
	End
End


;---------we don't want stealth for spiderlings on dis map ;;; not working

Object WildSpiderlingHordeMember
	CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_SHORT
End




Armor GoblinFighterArmor
  Armor = DEFAULT         100%   ; 
  Armor = SLASH           150%   ; ; ; 100
  Armor = PIERCE           115%   ;  ; ; 150
  Armor = SPECIALIST      15%   ; ; ; 40
  Armor = CAVALRY	  150%   ;
  Armor = CRUSH           125%   ;  ; ; 100
  Armor = SIEGE           100%   ;
  Armor = FLAME           100%   ; 
  Armor = MAGIC           100%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     200%   ; 
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 33%     ; ; 50
  Armor = CAVALRY_RANGED   150% ; ;
End





Armor WildFighterScavengedArmor
  Armor = DEFAULT         50%   ; 
  Armor = SLASH           40%   ; 
  Armor = PIERCE           30%   ;  ; ; 75; ; 40
  Armor = SPECIALIST      10%   ; 
  Armor = CAVALRY	  120%   ;; ; 75
  Armor = CRUSH           65%   ;  ; ; 50
  Armor = SIEGE           50%   ;
  Armor = FLAME           30%   ; ; ; 50
  Armor = MAGIC           20%   ;; ; 50; ; 30
  Armor = HERO            100%   ;
  Armor = HERO_RANGED     100%   ; 
  Armor = STRUCTURAL	  20%	
  FlankedPenalty 	 = 50%      
  Armor = URUK   50% ; ;
End




Armor GoblinArcherArmor
  Armor = DEFAULT         100%   ; 100%
  Armor = SLASH           150%   ; 100%; ; 100
  Armor = PIERCE          75%   ;  50%
  Armor = SPECIALIST       100%   ;  50%
  Armor = CRUSH            45%   ; 200% ; ; 200
  Armor = SIEGE           150%   ;; ; 100
  Armor = FLAME           100%   ;  30%
  Armor = MAGIC           60%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     75%   ;
  Armor = CAVALRY	  200%  
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 50%    
End



Armor WildMarauderHeavyArmor
  Armor = DEFAULT             50% ;40%
  Armor = SLASH               105% ;; ; 100; ; 90
  Armor = PIERCE             80% ; 20%; ; 65
  Armor = SPECIALIST          95% ; ; 50; ; 70
  Armor = CAVALRY	      5% ;
  Armor = CRUSH               5%  ;40%
  Armor = SIEGE               50% ;100%
  Armor = FLAME               75%  ; 0%; ; 50
  Armor = MAGIC               75% ;100%; ; 50
  Armor = HERO                80% ; 50%; ; 100
  Armor = HERO_RANGED         75% ; 50%  ; ; 100
  Armor = STRUCTURAL	  20%	
  FlankedPenalty 	 = 75%     
  Armor = CAVALRY_RANGED   30% ; ;
  Armor = URUK   115% ; ;
  Armor = POISON   25% ; ;
  DamageScalar = 130% ; ;
End




Object GoblinArcherHorde
BuildCost = 325
End

Object GoblinFighterHorde
BuildCost = 25
BuildTime = 12 ; 12s
End


Object IsengardUrukCrossbowHorde
BuildCost = 425
End


Object DwarvenMenOfDaleHorde
BuildCost = 400
End




;=============attack troll no longer dies in 1s to pikes

Armor AttackTrollArmor
  Armor = DEFAULT         25%   
  Armor = SLASH           40%  ;50%
  Armor = PIERCE          25%   
  Armor = SPECIALIST     125%  ;  200%
  Armor = CRUSH            1%  
  Armor = CAVALRY	  25% 
  Armor = SIEGE           50%   ;
  Armor = FLAME           50% 
  Armor = MAGIC           35%   ;50%
  Armor = HERO            100%   ;
  Armor = HERO_RANGED     100%  
  Armor = STRUCTURAL    25%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End



;================same about drummer

Armor TrollHeavyArmor
  Armor = DEFAULT         80%   ; 100%
  Armor = SLASH           65%   ; 100%
  Armor = PIERCE           15%   ;  50%; ; 50
  Armor = SPECIALIST      65%   ;  50%
  Armor = CRUSH           100%   ; 200%
  Armor = CAVALRY	  50% ;
  Armor = SIEGE           100%   ;
  Armor = FLAME           15%   ;  30%; ; 100
  Armor = MAGIC           15%   ;; ; 100
  Armor = HERO            150%   ;
  Armor = HERO_RANGED     75%   ; ; ; 200
  Armor = STRUCTURAL    10%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End






Object MordorAttackTroll
BuildCost = 1000
End


Object ElvenRivendellLancerHorde
BuildCost = 425
End

Object ElvenMithlondSentryHorde
BuildCost = 325
End


Object DwarvenAxethrowerHorde
BuildCost = 225
End


Object GondorRangerHorde
BuildCost = 550
End


;==========make mirks own other archers


Armor MirkwoodArcherArmor
  Armor = DEFAULT         100%   
  Armor = SLASH           150%   
  Armor = PIERCE          50%     ;70%   ; 
  Armor = SPECIALIST      100%   ;
  Armor = CAVALRY	 200%   ;
  Armor = CRUSH           200%  
  Armor = SIEGE           100%   ;
  Armor = FLAME           40%   ;
  Armor = MAGIC           60%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     200%   ; 
  Armor = STRUCTURAL	  100%	  
  FlankedPenalty 	 = 50%      
End




Object ElvenMirkwoodArcherHorde
BuildCost = 650
End


Object WildMarauderHorde
BuildCost = 475
End

Object IsengardBerserker
BuildCost = 250
End
















Weapon WildSpiderRiderBow     ; BALANCE Wild Spider Rider bow Weapon
	AttackRange         	= 450 ; 400
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( WILD_SPIDERRIDER_RANGE .01 )  
	
	WeaponSpeed         	= 321         ; dist/sec 
	MinWeaponSpeed      	= 241
	MaxWeaponSpeed      	= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX              	= FX_RohanArcherBowWeapon
	ScaleWeaponSpeed    	= Yes		;Used for lob weapons, scales speed proportional to range
	HitPercentage       	= 100		;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius       	= 16.0		;When this weapon misses it can randomly miss by as much as this distance.
	  
	AcceptableAimDelta		= 20		; prevent twitchy reaiming in horde on horde
	
	DelayBetweenShots   	= 0
	
	PreAttackDelay      	= WILD_SPIDERRIDER_BOW_PREATTACKDELAY 
	PreAttackType			= PER_SHOT
	;PreAttackRandomAmount	= 200   
	FiringDuration			= 0
	RequireFollowThru		= Yes

	  
	;AutoReloadWhenIdle		= 1	
	
	ClipSize				= 1
	AutoReloadsClip			= Yes
	ClipReloadTime			= Min:600 Max:800
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent

End





Weapon GoblinArcherMissileHordeRangefinder
	AttackRange			= 330   ; ;100 ;Slightly shorter than the archer's actual weapon
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_RANGE .01 )
	
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End

Weapon GoblinArcherMissileHordeRangefinderBombard
	AttackRange				= 330   ; ;100 
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_BOMBARD_MAXRANGE .01 )
	
	MinimumAttackRange		= GOBLIN_ARCHER_BOMBARD_MINRANGE
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	NoVictimNeeded			= Yes
	BombardType				= Yes	
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End





Weapon HaradrimArcherMissileHordeRangefinder
	AttackRange			= 350   ; ;100  ; Slightly shorter than the archer's actual weapon
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_RANGE .01 )
	
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End

Weapon HaradrimArcherMissileHordeRangefinderBombard
	AttackRange			= 350  ; ;100 
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE .01 )
	
	MinimumAttackRange		= MORDOR_HARADRIM_BOW_BOMBARD_MINRANGE
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	NoVictimNeeded			= Yes
	BombardType				= Yes	
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End





Weapon GoblinArcherBow       ; BALANCE Archer Weapon ;orc archer
	AttackRange			= 450    ;Horde member so it needs to be bigger than the horde weapon attack range.
   
   	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_RANGE .01 )
   
   
    LeechRangeWeapon    = Yes
	WeaponSpeed			= 300         ; dist/sec 
	MinWeaponSpeed		= 121
	MaxWeaponSpeed		= 400      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage		= 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius		= 20.0     ;When this weapon misses it can randomly miss by as much as this distance.
	
	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots	= 0
	PreAttackDelay      = GOBLIN_ARCHER_PREATTACKDELAY
	PreAttackType       = PER_POSITION
	PreAttackRandomAmount     = 200 
	FiringDuration      = 0
	
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:1050 Max:1400
	ContinuousFireOne	= 0
	ContinuousFireCoast	= 1600 
	
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent


End



Weapon GoblinArcherBowBombard       ; BALANCE Archer Weapon ;orc archer
	AttackRange			= 450
	MinimumAttackRange	= #SUBTRACT( GOBLIN_ARCHER_BOMBARD_MINRANGE 75 )
    LeechRangeWeapon    = Yes
	WeaponSpeed			= 300         ; dist/sec 
	MinWeaponSpeed		= 121
	MaxWeaponSpeed		= 400      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage       = 0     ;Always scatter
	ScatterRadius       = ARCHER_BOMBARD_SCATTER_RADIUS      ;When this weapon misses it can randomly miss by as much as this distance.
	
	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots	= 0
	PreAttackDelay      = GOBLIN_ARCHER_PREATTACKDELAY
	PreAttackType       = PER_POSITION
	PreAttackRandomAmount     = 200 
	FiringDuration      = 0
	
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:GOBLIN_ARCHER_BOW_RELOADTIME_MIN Max:GOBLIN_ARCHER_BOW_RELOADTIME_MAX
	ContinuousFireOne	= 0
	ContinuousFireCoast	= GOBLIN_ARCHER_BOW_RELOADTIME_MAX 
	
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
	NoVictimNeeded			= Yes
	BombardType				= Yes


End


Weapon HaradrimBow ; BALANCE Archer Weapon ;orc archer
  AttackRange 			= 450
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_RANGE .01 )   
  
  LeechRangeWeapon      = Yes
  WeaponSpeed 			= 270 ; ;401         ; dist/sec 
  MinWeaponSpeed 		= 121
  MaxWeaponSpeed 		= 440 ; ;601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX 				= FX_RohanArcherBowWeapon  
  ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage     	= 100     ;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius     	= 40.0     ;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots 	= 650
  PreAttackDelay        = MORDOR_HARADRIM_BOW_PREATTACKDELAY
  PreAttackRandomAmount     = 200 
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration      	= MORDOR_HARADRIM_BOW_FIRINGDURATION     ; Duration of the archer firing shot is 500ms.
  AntiAirborneVehicle	= Yes
  AntiAirborneMonster	= Yes
  CanBeDodged				= Yes



End

Weapon HaradrimBowBombard ; BALANCE Archer Weapon ;orc archer
	AttackRange 			= 450
	MinimumAttackRange	= #SUBTRACT( MORDOR_HARADRIM_BOW_BOMBARD_MINRANGE 75 )

	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE .01 )  
  
	LeechRangeWeapon      = Yes
	WeaponSpeed 			= 270 ; ;401         ; dist/sec 
	MinWeaponSpeed 		= 121
	MaxWeaponSpeed 		= 440 ; ;601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX 				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage     	= 0     ;Always scatter
	ScatterRadius     	= ARCHER_BOMBARD_SCATTER_RADIUS     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots 	= MORDOR_HARADRIM_BOW_DELAYBETWEENSHOTS
	PreAttackDelay        = MORDOR_HARADRIM_BOW_PREATTACKDELAY
	PreAttackRandomAmount     = 200 
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration      	= MORDOR_HARADRIM_BOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	CanBeDodged			= Yes
	NoVictimNeeded		= Yes
	BombardType			= Yes



End




Weapon IsengardArcherHordeRangeFinder
	AttackRange				= 340
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	LeechRangeWeapon		= Yes
	DelayBetweenShots		= 1500
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	FinishAttackOnceStarted = No
	CanFireWhileMoving		= No
	HordeAttackNugget
	End
End

Weapon IsengardArcherHordeRangeFinderBombard
	AttackRange				= 340   ; ;100
	MinimumAttackRange		= ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	LeechRangeWeapon		= Yes
	DelayBetweenShots		= 1500
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	FinishAttackOnceStarted = No
	CanFireWhileMoving		= No
	NoVictimNeeded			= Yes
	BombardType				= Yes
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End



Weapon IsengardArcherBow         ; BALANCE Archer Weapon
  AttackRange				= 500 
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	
  LeechRangeWeapon		    = Yes
  WeaponSpeed				= 321         ; dist/sec 
  MinWeaponSpeed			= 61
  MaxWeaponSpeed			= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range    
  FireFX = FX_RohanArcherBowWeapon 
  ScaleWeaponSpeed			= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage				= 100     ;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius				= 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
  PreAttackRandomAmount 	= 200     ; amount of additional preattack variance for archer type attacks only 
  DelayBetweenShots			= 2200	; time between shots, msec
  PreAttackDelay			= ISENGARD_URUKCROSSBOW_PREATTACKDELAY  	; 733 is the prep time for archer.
  PreAttackType				= PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration			= ISENGARD_URUKCROSSBOW_FIRINGDURATION 		; Duration of the archer firing shot is 500ms.
  CanFireWhileMoving		= No
  IsAimingWeapon            = Yes
  
  AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent



End

Weapon IsengardArcherBowBombard         ; BALANCE Archer Weapon
  AttackRange				= 500
  MinimumAttackRange		= #SUBTRACT( ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE 75 )
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	
  LeechRangeWeapon		    = Yes
  WeaponSpeed				= 321         ; dist/sec 
  MinWeaponSpeed			= 61
  MaxWeaponSpeed			= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range    
  FireFX = FX_RohanArcherBowWeapon 
  ScaleWeaponSpeed			= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage				= 0     ;Always scatter
  ScatterRadius				= ARCHER_BOMBARD_SCATTER_RADIUS     ;When this weapon misses it can randomly miss by as much as this distance.
  PreAttackRandomAmount 	= 200     ; amount of additional preattack variance for archer type attacks only 
  DelayBetweenShots			= ISENGARD_URUKCROSSBOW_DELAYBETWEENSHOTS 	; time between shots, msec
  PreAttackDelay			= ISENGARD_URUKCROSSBOW_PREATTACKDELAY 	; 733 is the prep time for archer.
  PreAttackType				= PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration			= ISENGARD_URUKCROSSBOW_FIRINGDURATION 		; Duration of the archer firing shot is 500ms.
  CanFireWhileMoving		= No
  IsAimingWeapon            = Yes
  
  AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
  
  NoVictimNeeded			= Yes
	BombardType				= Yes


End


Weapon IsengardArcherBowFireArrow       ; BALANCE Archer Weapon
	AttackRange               = 500
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	
	WeaponSpeed               = 321         ; dist/sec 
	MinWeaponSpeed            = 241
	MaxWeaponSpeed            = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX                    = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed          = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage             = 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius             = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots         = 2100
	PreAttackDelay            = ISENGARD_URUKCROSSBOW_PREATTACKDELAY    ; 1467 is the prep time for archer.
	PreAttackRandomAmount     = 200    ; amount of additional preattack variance for archer type attacks only  
	PreAttackType             = PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = ISENGARD_URUKCROSSBOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	CanFireWhileMoving		  = No	
	IsAimingWeapon            = Yes
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde

  	CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
	
	DamageType				  = FLAME

End

Weapon IsengardArcherBowBombardFireArrow       ; BALANCE Archer Weapon
	AttackRange               = 500
	MinimumAttackRange        = #SUBTRACT( ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE 75 )
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	
	WeaponSpeed               = 321         ; dist/sec 
	MinWeaponSpeed            = 241
	MaxWeaponSpeed            = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX                    = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed          = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage             = 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius             = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots         = ISENGARD_URUKCROSSBOW_DELAYBETWEENSHOTS
	PreAttackDelay            = ISENGARD_URUKCROSSBOW_PREATTACKDELAY    ; 1467 is the prep time for archer.
	PreAttackRandomAmount     = 200    ; amount of additional preattack variance for archer type attacks only  
	PreAttackType             = PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = ISENGARD_URUKCROSSBOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	CanFireWhileMoving		  = No	
	IsAimingWeapon            = Yes
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde

  	CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
  	
  	NoVictimNeeded			= Yes
	BombardType				= Yes	
	DamageType				  = FLAME

End

;========================Wildmen torches no longer hurt themselves

Object IsengardWildmanHorde

BuildCost = 500
End





Weapon IsengardWildmanCudgel  ; BALANCE
	LeechRangeWeapon	= Yes
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	DelayBetweenShots	= ISENGARD_WILDMAN_DELAYBETWEENSHOTS            ; time between shots, msec
	PreAttackDelay		= ISENGARD_WILDMAN_PREATTACKDELAY             ; 433 is natural time of the stabbing animation.
	PreAttackType		= PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration		= ISENGARD_WILDMAN_FIRINGDURATION            ; min 600 for anim
	FireFX				= FX_GondorSwordHit
	FireFlankFX			= FX_Flanking
        RadiusDamageAffects = ENEMIES NOT_SIMILAR

End







;==========================DRUMMER TROLL I WANT TO REMOVE HIS JUST_BUILT ANIM


Object MordorDrummerTroll

	

ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01New  
		  
		  OkToChangeModelColor = Yes
		  
		  StaticModelLODMode = Yes
		  
		DefaultModelConditionState
			Model               = MuDrmTroll_SKN
			Skeleton			= MuDrmTroll_SKL
		End
		
		IdleAnimationState
			StateName = STATE_Idle
			
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= ButtScratch										    
				AnimationName     	= MuDrmTroll_IDLC
				AnimationMode     	= ONCE
				AnimationPriority	= 1
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
	
	ModelConditionState = DYING BURNINGDEATH
		Model               = MuDrmTroll_SKN		
	End

	AnimationState			= DYING BURNINGDEATH
		Animation
			AnimationName	= MuDrmTroll_DTHA
			AnimationMode	= ONCE
			AnimationBlendTime = 10
		End
	End

		
	; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED
		Model                = MUDrmTroll_DISB
		Skeleton			 = MUDrmTroll_DISB 
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED 
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISB
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY 
		Model                = MUDrmTroll_DISA
		Skeleton			 = MUDrmTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY  
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISA
			AnimationMode      = ONCE
		End
	End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MuDrmTroll_MFDA
				AnimationMode	= LOOP
				Distance		= 100
			End
		End

		AnimationState        			= STUNNED_FLAILING
			Animation           		= FLYA
				AnimationName     	= MuDrmTroll_FLYA
				AnimationMode     	= LOOP
			End
		End
		
		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MuDrmTroll_LNDA
				AnimationMode = ONCE
			End
		End

		ModelConditionState = DYING
			Model               = MuDrmTroll_SKN		
		End

		AnimationState        			= DYING
			Animation           		= DIEA
				AnimationName     	= MuDrmTroll_DTHA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmSplatDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmSplatDust FollowBone:Yes
		End

		//Turned to Stone
		ModelConditionState = STONED 
			Model			= MuDrmTroll_SKN
			Texture			= MuDrmTroll.tga MUDrmTroll_R.tga
		End 		

		AnimationState		= STONED
			Animation			= Stoned
				AnimationName		= MuDrmTroll_IDLB
				AnimationMode		= MANUAL
				AnimationBlendTime	= 10
			End
			Flags	= START_FRAME_LAST
		End
		
		AnimationState        			= STUNNED_STANDING_UP
			Animation           		= GTPA
				AnimationName     	= MuDrmTroll_GTPA
				AnimationMode     	= ONCE
			End
		End
		
		AnimationState        			= STUNNED
			Animation           		= LNDA
				AnimationName     	= MuDrmTroll_LNDA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmFallDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmFallDust FollowBone:Yes
		End

		
		AnimationState						= PARALYZED
			Animation
				AnimationName				= MuDrmTroll_IDLB
				AnimationMode				= LOOP
			End
		End

		AnimationState = PACKING_TYPE_1										; The roar special power.
			Animation
				AnimationName = MuDrmTroll_IDLD 
				AnimationMode = LOOP
			End
			EnteringStateFX = FX_FearBlast
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MuDrmTroll_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
		
		AnimationState 				= TURN_LEFT
			Animation = Moving
				AnimationName 		= MuDrmTroll_TRNL
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState 				= TURN_RIGHT
			Animation = Moving
				AnimationName 		= MuDrmTroll_TRNR
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState				= MOVING PANICKING
			Animation			= RUNM
				AnimationName		= MuDrmTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags				= RANDOMSTART
		End
		
		AnimationState				= MOVING WANDER
			Animation			= WLKA
				AnimationName		= MuDrmTroll_WLKA
				AnimationMode		= LOOP
			End
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 FireWhenSkipped Name:FX_TrollLeftFootStep
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName 		= MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = Moving
				AnimationName 		= MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = DrumCorp
				AnimationName 		= MuDrmTroll_WLKB
				AnimationMode 		= ONCE
				AnimationPriority = 1
				Distance = 55 
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 FireWhenSkipped Name:FX_TrollLeftFootStep
		End
		
		AnimationState        			= FIRING_OR_PREATTACK_A
			Animation           		= StickSwipe
				AnimationName     	= MuDrmTroll_ATKA
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
			Animation           		= FrontKick
				AnimationName     	= MuDrmTroll_ATKB
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
;			ParticleSysBone = B_STICKR TrollDrmAtk  FollowBone:Yes        ;removed because kick has Dust Effect
			BeginScript
				if CurDrawableIsCurrentTargetKindof("STRUCTURE") or CurDrawableIsCurrentTargetKindof("MONSTER") then
					return ("FrontKick")
				else
					return ("StickSwipe")
				end
			EndScript
		End
		
    	AnimationState 				= HIT_REACTION HIT_LEVEL_1 SELECTED
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_HITB
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState 				= HIT_REACTION HIT_LEVEL_1
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_HITA
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MuDrmTroll_IDLD 
				AnimationMode = LOOP
			End
		End
		
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = SticksUpBreathe
				AnimationName     = MuDrmTroll_ATNB
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			Animation           = SticksUpBreathe
				AnimationName     = MuDrmTroll_ATNB
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End


			
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = MuDrmTroll_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
		TransitionState       = TRANS_SelectedToIdle
			Animation           = ATNA
				AnimationName     = MuDrmTroll_ATNA
				AnimationMode     = ONCE_BACKWARDS 
				AnimationSpeedFactorRange = 0.9 1.0
			End
			Flags = START_FRAME_LAST
		End

	End
End

END


Object MordorAttackTroll




ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01New
		WadingParticleSys = EntRipples
		OkToChangeModelColor = Yes
		ExtraPublicBone = Trunk
		ShowShadowWhileContained = Yes
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = MUAtkTroll_SKN
		End

		AnimationState = DYING DEATH_3
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = LOOP
			End
		End

		; Splatted death goes first, independant of death flags
		ModelConditionState    = DYING DECAY SPLATTED USER_4
			Model                = MUAtkTr2_DISC
			RetainSubObjects = Yes
		End
		ModelConditionState    = DYING DECAY SPLATTED
			Model                = MUAtkTroll_DISC

			RetainSubObjects = Yes
		End

		AnimationState         = DYING DECAY SPLATTED 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISC.MUAtkTroll_DISC
				AnimationMode      = ONCE
			End
		End

		ModelConditionState    = DYING DECAY DEATH_1 USER_4
			Model                = MUAtkTr2_DISA
			RetainSubObjects = Yes
		End;
		ModelConditionState    = DYING DECAY DEATH_1
			Model                = MUAtkTroll_DISA
			RetainSubObjects = Yes
		End;

		AnimationState         = DYING DECAY DEATH_1 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISA.MUAtkTroll_DISA
				AnimationMode      = ONCE
			End
		End
		
		ModelConditionState    = DYING DECAY DEATH_2 USER_4
			Model                = MUAtkTr2_DISB
			RetainSubObjects = Yes
		End;
		ModelConditionState    = DYING DECAY DEATH_2
			Model                = MUAtkTroll_DISB
			RetainSubObjects = Yes
		End;

		AnimationState         = DYING DECAY DEATH_2 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISB.MUAtkTroll_DISB
				AnimationMode      = ONCE
			End
		End

		; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
		End


		AnimationState = DYING DEATH_1
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
		End

		AnimationState = DYING DEATH_2
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TrollSplatDust1
			ParticleSysBone = BAT_HEAD TrollSplatDust1
		End
		
		ModelConditionState = DYING USER_4
			Model = MUAtkTr2_SKN
		End
		ModelConditionState = DYING
			Model = MUAtkTroll_SKN
		End

		AnimationState = DYING
			Animation
				AnimationName     =  MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode     = ONCE
			End
		End

		//Turned to stone
		ModelConditionState = STONED USER_4
			Model			= MUAtkTr2_SKN
			Texture			= MUAttkTroll.tga MUAttkTroll_R.tga
		End 		
		ModelConditionState = STONED 
			Model			= MUAtkTroll_SKN
			Texture			= MUAttkTroll.tga MUAttkTroll_R.tga
		End 		

		AnimationState		= STONED
			Animation			= Stoned
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode		= MANUAL
				AnimationBlendTime	= 10
			End
			Flags	= START_FRAME_LAST
		End

		; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= MUMntTroll_GTPA
				AnimationName		= MUMntTroll_SKL.MUMntTroll_GTPA
				AnimationMode		= ONCE
			End
		End	

		AnimationState				= STUNNED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = B_PELVIS TrollSplatDust2
			ParticleSysBone = BAT_HEAD TrollSplatDust2
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode				= LOOP
			End
		End

		;--Troll is angry
		AnimationState = WEAPONSET_RAMPAGE
			Animation = GetMad
				AnimationName = MUMntTroll_SKL.MUMntTroll_RPGC
				AnimationMode = LOOP
			End
		End

		; --------- With Club ------------
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKC
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKD
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End

		;Running attack
		AnimationState = MOVING FIRING_OR_PREATTACK_B
			Animation

				AnimationName = MUMntTroll_SKL.MUMntTroll_ATRA
				AnimationMode = LOOP
				UseWeaponTiming		= Yes
			End
		End
			
		AnimationState = PREPARING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBC
				AnimationMode = ONCE
			End

		End

		IdleAnimationState
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = IDLE
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLE  ;ROAR THEN HIT GROUND (holding club only)
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 5
			End
			Animation = IDLG
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLG  ;BUTT SCRATCH THEN BURP
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 10
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript ; Here since normal Packing state can be skipped with a fast click.
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End


		; --------- With Bare Hands ------------
		AnimationState = UNPACKING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode = ONCE
			End
		End

		AnimationState = TURN_LEFT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = TURN_RIGHT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
				AnimationMode = LOOP

				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End


		;AnimationState = MOVING ATTACKING
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 0.77 0.77
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
		;	FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		;End

		AnimationState				= MOVING PANICKING
			Animation				= RUNM
				AnimationName		=  MUMntTroll_SKL.MUMntTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		;AnimationState = MOVING DAMAGED
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.3 1.3
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:3 FireWhenSkipped Name:FX_TrollRightFootStep
		;End


		;AnimationState = MOVING
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club 
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.36 1.36
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:3 FireWhenSkipped Name:FX_TrollRightFootStep	
		;End

		AnimationState = MOVING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
				AnimationMode = LOOP
				;AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		End


		AnimationState = ENGAGED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode = LOOP
			End
		End


		AnimationState = DESTROYED_WEAPON
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
				AnimationMode = ONCE
			End
		End

		; --------- Just built ------------

		AnimationState = JUST_BUILT
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_WLKC ; temp
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.9 0.9			
			End
			FXEvent	= Frame:0 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:16 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:30 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_TrollLeftFootStep
		End	

		; --------- Click and Hit Reactions ------------

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITC
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITB
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_3
			Animation = Hit_Level_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_1
			Animation = Click_React_1
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_2
			Animation = Click_React_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTB
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_3
			Animation = Click_React_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTC
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_4
			Animation = Click_React_4
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTD
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_5
			Animation = Click_React_5
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_2
			Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_3 
			Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
				AnimationMode = LOOP
			End
		End

		;-----------------------------------
		;Emotion

		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
				AnimationMode	=	LOOP
			End
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Taunting3
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= Taunting4
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
		End

		ModelConditionState = USER_4 
			Model			= MUAtkTr2_SKN
		End 		
	End
End

END











;========================================================================
;fortress keep




Upgrade Upgrade_KeepLevel2
 Type = OBJECT
	BuildCost		= 1000
	BuildTime		= 30
	DisplayName		= Upgrade:KeepLevel2
End



Upgrade Upgrade_KeepLevel3
 Type = OBJECT
	BuildCost		= 2500
	BuildTime		= 60
	DisplayName		= Upgrade:KeepLevel3
End



CommandSet  KeepCommandSet

End


;========================================


CommandSet NewTowerCommandSet
	1 = Command_ExitGarrison
	2 = Command_Sell
End




Object DwarvenEreborTowerTowerExpansion

Scale = 0.5



ReplaceModule ModuleTag_Draw
  Draw = W3DScriptedModelDraw ModuleTag_DrawNew

		ExtraPublicBone	= ARROW_01
		ExtraPublicBone	= ARROW_02
		ExtraPublicBone	= ARROW_03
		ExtraPublicBone	= ARROW_04
		ExtraPublicBone	= ARROW_05
		ExtraPublicBone	= ARROW_06
		ExtraPublicBone	= ARROW_07
		ExtraPublicBone	= ARROW_08
		ExtraPublicBone	= ARROW_09
		ExtraPublicBone	= ARROW_10
		ExtraPublicBone	= ARROW_11
		ExtraPublicBone	= ARROW_12

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = DB_houses_05
	WeaponLaunchBone =   PRIMARY ARROW_	
    End
    
    ; ---------- destruction states

		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = DB_houses_05			
		End
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           = DBFDoor_DRA
				AnimationName     = DB_houses_05SKL.DBFTower_ABLD
				AnimationMode     = MANUAL
			End
			Flags				  = START_FRAME_FIRST
			ParticleSysBone = NONE BuildingContructDustExp
			ParticleSysBone = NONE ExpDwarves
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End


    
    ModelConditionState  = DAMAGED
      Model         = DBhouse5_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
	AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
	End
	
    ModelConditionState  = REALLYDAMAGED
      Model         = DBhouse5_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    End
    
    AnimationState = REALLYDAMAGED
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse5_D2.DBhouse5_D2
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_BuildingReallyDamaged
	End
    
    ModelConditionState  = RUBBLE
		Model         = DBhouse5_D3
	End
		
	AnimationState = RUBBLE
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse5_D3.DBhouse5_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_StructureMediumCollapse
	End 	 
  End
End



	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY FortressArrowTowerBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY HaradrimPalaceBow  
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	KindOf         = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION CAN_ATTACK MADE_OF_WOOD GARRISON GARRISONABLE_UNTIL_DESTROYED ALWAYS_SHOW_HOUSE_COLOR FS_BASE_DEFENSE AUTO_RALLYPOINT CAN_SHOOT_OVER_WALLS IGNORE_FOR_VICTORY


AddModule
	Behavior = GrantUpgradeCreate ModuleTag_abcdefghijkl
         UpgradeToGrant = Upgrade_MordorHaradrimPalaceLevel3
     End
End


AddModule
	Behavior = WeaponSetUpgrade ModuleTag_triggerweaponsetupgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
	End
End


AddModule
	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison
 		ObjectStatusOfContained			= UNSELECTABLE CAN_ATTACK ENCLOSED
 		ContainMax              		= 1 ; ;2
 		DamagePercentToUnits    		= 0%
 		PassengerFilter					= GENERIC_FACTION_GARRISONABLE
		AllowEnemiesInside				= No
		AllowAlliesInside				= No
		AllowNeutralInside				= No
		AllowOwnPlayerInsideOverride	= Yes
 		NumberOfExitPaths       		= 1		; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
 		PassengerBonePrefix     		= PassengerBone:Arrow_ KindOf:INFANTRY
 		EntryPosition					= X:0.0 Y:0.0 Z:0.0
		EntryOffset						= X:50.0 Y:0.0 Z:0.0
		ExitOffset						= X:50.0 Y:0.0 Z:0.0
		EnterSound						= RuinedTowerEnterSound
		KillPassengersOnDeath			= No
		ShowPips						= No
                
	End
End

CommandSet = NewTowerCommandSet








END





CommandButton Command_ConstructDwarvenEreborTowerTowerExpansion
	Command          = FOUNDATION_CONSTRUCT
	Object           = DwarvenEreborTowerTowerExpansion
	TextLabel        = CONTROLBAR:ConstructDwarvenEreborTowerTowerExpansion
	ButtonImage      = BDFortress_AxeTower
	ButtonBorderType = BUILD 
	DescriptLabel    = CONTROLBAR:ToolTipConstructDwarvenEreborTowerTowerExpansion
	Radial           = Yes  
End 



CommandSet  DwarvenFortressExpansionPadCornerCommandSetNew
	1 = Command_ConstructDwarvenEreborTowerTowerExpansion
End


Object DwarvenFortressExpansionPadCorner
CommandSet = DwarvenFortressExpansionPadCornerCommandSetNew
End





;================================







CommandButton Command_ConstructDwarvenBattleWagon
	Command				= UNIT_BUILD
	Object				= DwarvenBattleWagon
	Options				= CANCELABLE NEED_UPGRADE ; ;
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructDwarvenBattleWagon
	ButtonImage			= BDForgeWorks_Battlewagon
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildDwarvenBattleWagonNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes    
End





CommandButton Command_ConstructDwarvenMenOfDaleHorde
	Command				= UNIT_BUILD
	Object				= DwarvenMenOfDaleHorde
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade			= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructDwarvenMenOfDale
	ButtonImage			= BDArcheryRange_MenofDale
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildDwarvenMenOfDaleHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes 
End







CommandButton Command_ConstructGondorRangerHorde
	Command				= UNIT_BUILD
	Object				= GondorRangerHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructGondorRangerHorde
	ButtonImage			= BGArcheryRange_Rangers
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildGondorRangerHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End





CommandButton Command_ConstructGondorKnightHorde
	Command				= UNIT_BUILD
	Object				= GondorKnightHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructGondorKnightHorde
	ButtonImage			= BGStables_Knights
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildGondorKnightHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End




CommandButton Command_ConstructElvenMirkwoodArcherHorde
	Command				= UNIT_BUILD
	Object				= ElvenMirkwoodArcherHorde
	Options				=  CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel2 
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructElvenMirkwoodArcherHorde
	ButtonImage			= BEElvenBarracks_MirkwoodArcher
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildElvenMirkwoodArcherHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes    
End










CommandButton Command_ConstructElvenRivendellLancers
	Command				= UNIT_BUILD
	Object				= ElvenRivendellLancerHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2 
	TextLabel			= CONTROLBAR:BuildElvenRivendellLancers
	ButtonImage			= BEGreenPasture_RivendellLancer
	ButtonBorderType	= BUILD													
	DescriptLabel		= CONTROLBAR:ToolTipBuildElvenRivendellLancersNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End



CommandButton Command_ConstructIsengardBerserker
	Command				= UNIT_BUILD
	Object				= IsengardBeserker
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructIsengardBerserker
	ButtonImage			= BIBerserker
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardBerserkerNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes     
End





CommandButton Command_ConstructIsengardWargRiderHorde
	Command				= UNIT_BUILD
	Object				= IsengardWargRiderHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructIsengardWargRider
	ButtonImage			= BIWargPit_Riders
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardWargRiderNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End







CommandButton Command_ConstructMordorHaradrimArcherHorde
	Command				= UNIT_BUILD
	Object				= MordorHaradrimArcherHorde
	Options				=  CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorHaradrimArcherHorde
	ButtonImage			= BMHaradrimPalace_Haradrim
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorHaradrimArcherHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
End




CommandButton Command_ConstructMordorDrummerTroll
	Command				= UNIT_BUILD
	Object				= MordorDrummerTroll
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructMordorDrummerTrolls
	ButtonImage			= BMTrollCages_DrummerTroll
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipConstructMordorDrummerTrollsNew
	Radial				= Yes
	InPalantir	   		= 	Yes
	ShowProductionCount	= Yes     
End





CommandButton Command_ConstructMordorAttackTroll
	Command				= UNIT_BUILD
	Object				= MordorAttackTroll
	Options				= CANCELABLE NEED_UPGRADE
	TextLabel			= CONTROLBAR:ConstructMordorAttackTroll
	ButtonImage			= BMTrollCages_AttackTroll
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorAttackTrollNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
End





CommandButton Command_ConstructWildMarauderHorde
	Command				= UNIT_BUILD
	Object				= WildMarauderHorde
	Options				= CANCELABLE NEED_UPGRADE ; ;
	TextLabel			= CONTROLBAR:ConstructWildMarauderHorde
	ButtonImage			= BWFissure_Marauder
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildWildMarauderHordeNew
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End





CommandButton Command_ConstructWildSpiderRiderHorde
	Command				= UNIT_BUILD
	Object				= GoblinSpiderRiderHorde
	Options				= CANCELABLE NEED_UPGRADE
	TextLabel			= CONTROLBAR:ConstructWildSpiderRiderHorde
	ButtonImage			= BWSpiderPit_SpiderRider
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildWildSpiderRiderHordeNew
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End








CommandButton Command_ConstructInnIsengardWildmanHorde        ; so they can be upgraded and they can level up
	Command				= UNIT_BUILD
	Object				= IsengardWildmanHorde  ;Inn
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructIsengardWildmanHorde
	ButtonImage			= BCInn_WildmenofDunland
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardWildmanHorde
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes     
End








CommandButton Command_PurchaseUpgradeWildCaveLevel2   ; keep upgrade in fact
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_KeepLevel2 
  Options			= CANCELABLE
  TextLabel         = CONTROLBAR:UpgradeKeepLevel2
  ButtonImage       = UCCommon_UpgradeStructureNew
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipUpgradeKeepLevel2
  Radial            = Yes
  InPalantir	   	= Yes
End



;==========================


CommandButton Command_PurchaseUpgradeWildCaveLevel3   ; keep upgrade in fact
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_KeepLevel3
  Options			= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
  TextLabel         = CONTROLBAR:UpgradeKeepLevel3
  ButtonImage       = UCCommon_UpgradeStructureNew
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipUpgradeKeepLevel3
  Radial            = Yes
  InPalantir	   	= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2KeepUpgrade
End


;===========================

;------------------------------------------------------------------------
;;FIXING BUG WITH HARADRIM ARCHERS + adding them fire arrows






ExperienceLevel	EvilEliteLevel1
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_1
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_1
	ExperienceAwardOwnGuysDie			= 	0
	ShowLevelUpTint						=	Yes	
	Rank								=	1
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level1
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel2
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_2
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_2
	AttributeModifiers					=	EvilEliteBonusRank2
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp2FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	2
        Upgrades                                                  = Upgrade_ObjectLevel2
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level2
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40

	End	
END

ExperienceLevel	EvilEliteLevel3
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_3
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_3
	AttributeModifiers					=	EvilEliteBonusRank3
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp3FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	3
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level3
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel4
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_4
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_4
	AttributeModifiers					=	EvilEliteBonusRank4
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp4FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	4
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level4
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%

		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel5
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_5
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_5
	AttributeModifiers					=	EvilEliteBonusRank5
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp4FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	5
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level4
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END


SpecialPower SpecialAbilityHaradrimArcherBarbedArrow
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 20000 ; 6s was too overpowered
; 	UnitSpecificSoundToUseAsInitiateIntendToDoVoice = VoiceInitiateBarbedArrowAttack
End




CommandButton Command_HaradrimArcherBarbedArrowAbility
	Command				= SPECIAL_POWER
	SpecialPower		= SpecialAbilityHaradrimArcherBarbedArrow
	Options				= NEED_TARGET_ENEMY_OBJECT NEED_TARGET_NEUTRAL_OBJECT OK_FOR_MULTI_SELECT OK_FOR_MULTI_EXECUTE ; ;
	ButtonImage			= UCCommon_BarbedArrows
	CursorName			= EvilAbilityObj
	InvalidCursorName	= GenericInvalid
	TextLabel			= CONTROLBAR:BarbedArrows
	DescriptLabel		= CONTROLBAR:ToolTipBarbedArrowsNew
	InPalantir			= Yes	
	ButtonBorderType    = ACTION
	AutoAbility			= Yes
End





CommandSet MordorHaradrimArcherHordeBarbedArrowAndFireArrowCommandSet
	1	= Command_ToggleStance
	2	= Command_ArcherBombard
	3	= Command_HaradrimArcherBarbedArrowAbility
        4       = Command_PurchaseUpgradeMordorFireArrows
	5	= Command_PurchaseUpgradeMordorBasicTraining
	6	= Command_PurchaseUpgradeMordorHeavyArmor
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End




Object MordorHaradrimArcherHorde
		CommandSet		= MordorHaradrimArcherHordeBarbedArrowAndFireArrowCommandSet
End




;----------------------------------------------------------------------------------------



;-----------------MORDOR SECTION



CommandButton Command_PurchaseTechnologyMordorFireArrows
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyMordorFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorFireArrows
	ButtonImage			= BMOrcPit_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3TavernFireArrows
End




CommandButton Command_PurchaseTechnologyMordorForgedBlades
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyMordorForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorForgedBlades
	ButtonImage			= BIArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2OrcPitForgedBlades
End




CommandButton Command_PurchaseTechnologyMordorHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyMordorHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorHeavyArmor
	ButtonImage			= BIArmory_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorHeavyArmor
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2OrcPitForgedBlades ; ;TOOLTIP:LackLevel2OrcPitHeavyArmor
End





CommandButton Command_PurchaseTechnologyMordorBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
        NeededUpgradeAny = Yes
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesMordorFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End



;---------------------ISENGARD SECTION







CommandButton Command_PurchaseTechnologyIsengardFireArrows
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardFireArrows 
	Options				= CANCELABLE 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardFireArrows
	ButtonImage			= BIArmory_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardFireArrowsTech
End





CommandButton Command_PurchaseTechnologyIsengardForgedBlades
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardForgedBlades 
	Options				= CANCELABLE 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardForgedBlades
	ButtonImage			= BIArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardForgedBladesTech
End




CommandButton Command_PurchaseTechnologyIsengardHeavyArmor
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardHeavyArmor 
	Options				= CANCELABLE 
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardHeavyArmor
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage			= BIArmory_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardHeavyArmorTech
End



CommandButton Command_PurchaseTechnologyIsengardBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End


CommandButton Command_SelectRevivablesIsengardFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End




;------------------WILD (GOBLIN) SECTION

CommandButton Command_PurchaseTechnologyWildHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyWildHeavyArmor
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildHeavyArmor
	ButtonImage			= BWTreasureTrove_ScavengedArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseechnologyWildHeavyArmor
	Radial				= Yes
	InPalantir			= Yes
End

CommandButton Command_PurchaseTechnologyWildFireArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyWildFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildFireArrows
	ButtonImage			= BMOrcPit_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyWildFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3TreasureTrove
	
End




CommandButton Command_PurchaseTechnologyWildForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyWildForgedBlades
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildForgedBlades
	ButtonImage			= BWTreasureTrove_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyWildForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2TreasureTrove
	
End


CommandButton Command_PurchaseTechnologyWildBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesWildFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End




;-----------------------MEN SECTION

CommandButton Command_PurchaseTechnologyGondorForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorForgedBlades
	ButtonImage			= BRArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	; ;LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlackSmithForgedBlades
End

CommandButton Command_PurchaseTechnologyGondorHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorHeavyArmor
	ButtonImage			= BGBlacksmith_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlackSmithForgedBlades ; ;TOOLTIP:LackLevel3BlacksmithHeavyArmor
End



CommandButton Command_PurchaseTechnologyGondorFireArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorFireArrows
	NeededUpgrade		= Upgrade_KeepLevel3 
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorFireArrows
	ButtonImage			= BGArcheryRange_FireArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackGondorFireArrowsTechnology
End



CommandButton Command_PurchaseTechnologyGondorBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesMenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End






;---------------------------------DWARF SECTION


CommandButton Command_PurchaseTechnologyDwarvenFireArrows ;building
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyRohanFireArrows
	ButtonImage			= BGArcheryRange_FireArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyRohanFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ArcheryRange ; ;
End



CommandButton Command_PurchaseTechnologyDwarvenForgedBlades
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenForgedBlades
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyDwarvenForgedBlades
	ButtonImage			= BDForgeWorks_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyDwarvenForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ForgeWorks ; ;TOOLTIP:LackLevel2ForgeWorks
End


CommandButton Command_PurchaseTechnologyDwarvenMithrilMail
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenMithrilMail
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyDwarvenMithrilMail
	ButtonImage			= BDForgeWorks_MithrilMail
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyDwarvenMithrilMail
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ForgeWorks
End


CommandButton Command_PurchaseTechnologyDwarvenBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3 
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesDwarvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End


;------------------------------- ELVES SECTION 




CommandButton Command_PurchaseTechnologyElvenSilverthornArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE
	Upgrade				= Upgrade_TechnologyElvenSilverthornArrows
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenSilverthornArrows
	ButtonImage			= BEEregionForge_SilverthornArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyElvenSilverthornArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackSilverthornTechnology
End

CommandButton Command_PurchaseTechnologyElvenForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyElvenForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenForgedBlades
	ButtonImage			= BEEregionForge_ForgedBlades
	ButtonBorderType		= UPGRADE
	DescriptLabel			= CONTROLBAR:ToolTipPurchaseTechnologyGondorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2EregionForge
End


CommandButton Command_PurchaseTechnologyElvenHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyElvenHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenHeavyArmor
	ButtonImage			= BEEregionForge_ElvenArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyElvenHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlacksmithHeavyArmor
End

CommandButton Command_PurchaseTechnologyElvenBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesElvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE HIDE_WHILE_DISABLED
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;for flaming munitions


CommandButton Command_PurchaseUpgradeDwarvenFortressFlamingMunitions 
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_GoodFortressFlamingMunitionsTrigger
  Options			= CANCELABLE
  TextLabel         = CONTROLBAR:PurchaseUpgradeDwarvenFortressFlamingMunitions
  ButtonImage       = BDFortress_FlamingMunitions
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipPurchaseUpgradeDwarvenFortressFlamingMunitionsNew
  Radial            = Yes
  InPalantir	   	= Yes
End










;=========================================================================
;THIS BLOCK OF CODE FOR FREE BANNER CARRIERS
;=========================================================================


CommandButton Command_PurchaseUpgradeGondorBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_GondorBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeGondorBasicTraining
	ButtonImage			= BGBlacksmith_SilverTreeBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeGondorBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackGondorBasicTraining
End

CommandButton Command_PurchaseUpgradeElvenBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_ElvenBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeElderRacesBasicTraining
	ButtonImage			= BEEregionForge_BannerCarrier
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeElderRacesBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackElderRacesBasicTraining
End


CommandButton Command_PurchaseUpgradeIsengardBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_IsengardBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeIsengardBasicTraining
	ButtonImage			= BIArmory_WhiteHandBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeIsengardBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardBasicTraining
End



CommandButton Command_PurchaseUpgradeMordorBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_MordorBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeMordorBasicTraining
	ConflictingLabel	= CONTROLBAR:BatallionAreadyHasUpgrade
	ButtonImage			= BMOrcPit_RedEyeBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeMordorBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackMordorBasicTraining
End




CommandButton Command_PurchaseUpgradeWildBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_WildBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeWildBasicTraining
	ButtonImage			= BWTreasureTrove_BannerCarrier
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeWildBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackWildBasicTraining
End


;==========================================================================























CommandSet CommandSetKeepDwarves
InitialVisible = 10


  1 = Command_ConstructDwarvenGuardianHorde
  2 = Command_ConstructDwarvenPhalanxHorde
  3 = Command_ConstructDwarvenAxeThrowerHorde
  4 = Command_ConstructDwarvenMenOfDaleHorde
  5 = Command_ConstructDwarvenBattleWagon
  6     = Command_PurchaseTechnologyDwarvenBasicTraining
  7     = Command_SelectRevivablesDwarvenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3
  10 = Command_PurchaseUpgradeDwarvenFortressFlamingMunitions 


	11	= Command_PurchaseTechnologyDwarvenMithrilMail
	12	= Command_PurchaseTechnologyDwarvenForgedBlades
        13      = Command_PurchaseTechnologyDwarvenFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack



End









CommandSet CommandSetKeepMen

InitialVisible = 9


  1	= Command_ConstructGondorFighterHorde
  2	= Command_ConstructGondorArcherHorde
  3	= Command_ConstructGondorTowerShieldGuardHorde
  4     = Command_ConstructGondorRangerHorde
  5     = Command_ConstructGondorKnightHorde
  6     = Command_PurchaseTechnologyGondorBasicTraining
  7     = Command_SelectRevivablesMenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3


	10	= Command_PurchaseTechnologyGondorHeavyArmor
	11	= Command_PurchaseTechnologyGondorForgedBlades
        12      = Command_PurchaseTechnologyGondorFireArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack






End







CommandSet CommandSetKeepElves

InitialVisible = 9

  1 = Command_ConstructElvenLorienWarriorHorde
  2 = Command_ConstructElvenLorienArcherHorde
  3 = Command_ConstructElvenMithlondSentryHorde
  4 = Command_ConstructElvenMirkwoodArcherHorde
 5  = Command_ConstructElvenRivendellLancers
  6     = Command_PurchaseTechnologyElvenBasicTraining
  7     = Command_SelectRevivablesElvenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3


	10	= Command_PurchaseTechnologyElvenHeavyArmor
	11	= Command_PurchaseTechnologyElvenForgedBlades
        12      = Command_PurchaseTechnologyElvenSilverthornArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack



End









CommandSet CommandSetKeepIsengard
	InitialVisible = 9


  1	= Command_ConstructIsengardFighterHorde
  2	= Command_ConstructIsengardUrukCrossbowHorde
  3	= Command_ConstructIsengardPikemanHorde
  4    = Command_ConstructIsengardBerserker
  5   = Command_ConstructIsengardWargRiderHorde
  6  = Command_PurchaseTechnologyIsengardBasicTraining
  7  = Command_SelectRevivablesIsengardFortress
  8 = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3

	10	= Command_PurchaseTechnologyIsengardHeavyArmor
	11	= Command_PurchaseTechnologyIsengardForgedBlades
        12      = Command_PurchaseTechnologyIsengardFireArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack




End








CommandSet CommandSetKeepMordor
	InitialVisible = 10
  1	= Command_ConstructEasterlingHorde
  2	= Command_ConstructMordorHaradrimArcherHorde
  3       = Command_ConstructMordorCorsairsOfUmbarHorde
  4       = Command_ConstructMordorDrummerTroll
  5       = Command_ConstructMordorAttackTroll
  6       = Command_ConstructIsengardWargRiderHorde
  7       = Command_PurchaseTechnologyMordorBasicTraining
  8       = Command_SelectRevivablesMordorFortress
  9 = Command_PurchaseUpgradeWildCaveLevel2
  10 = Command_PurchaseUpgradeWildCaveLevel3



	11	= Command_PurchaseTechnologyMordorHeavyArmor
	12	= Command_PurchaseTechnologyMordorForgedBlades
        13      = Command_PurchaseTechnologyMordorFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack


End










CommandSet CommandSetKeepWild
	InitialVisible = 10
	1	= Command_ConstructInnIsengardWildmanHorde ; 
        2       = Command_ConstructGoblinFighterHorde
        3       = Command_ConstructGoblinArcherHorde
        4       = Command_ConstructGoblinTroll
        5       = Command_ConstructWildMarauderHorde
        6       = Command_ConstructWildSpiderRiderHorde
  7       = Command_PurchaseTechnologyWildBasicTraining
  8       = Command_SelectRevivablesWildFortress
  9 = Command_PurchaseUpgradeWildCaveLevel2
  10 = Command_PurchaseUpgradeWildCaveLevel3



	11	= Command_PurchaseTechnologyWildHeavyArmor
	12	= Command_PurchaseTechnologyWildForgedBlades
        13      = Command_PurchaseTechnologyWildFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack


End














;=======================================THE COMMAND CENTER OF THE FORTRESS (THE KEEP)=================================



Object DwarvenArcheryRange

DisplayName = OBJECT:CivilianBattleTower ; keep
ThreatLevel = 15.0

ReplaceModule ModuleTag_Draw    ; needed to change this in order to make it shoot like a fortress

  Draw = W3DScriptedModelDraw ModuleTag_Draw_New


	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10
	ExtraPublicBone = ARROW_11
	ExtraPublicBone = ARROW_12
	ExtraPublicBone = ARROW_15
	ExtraPublicBone = ARROW_16
	ExtraPublicBone = ARROW_17
	ExtraPublicBone = ARROW_18
	ExtraPublicBone = ARROW_19
	ExtraPublicBone = ARROW_20
	ExtraPublicBone = ARROW_21
	ExtraPublicBone = ARROW_22
	ExtraPublicBone = ARROW_23

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = DB_houses_01
    WeaponLaunchBone    = PRIMARY ARROW_		
		ParticleSysBone     = FXbone ElvenForgeSmoke FollowBone:Yes
	  End
	  
	  ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = DBhouse1_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
	AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
	End

    ModelConditionState  = REALLYDAMAGED
      Model         = DBhouse1_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    End
    
    AnimationState = REALLYDAMAGED
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse1_D2.DBhouse1_D2
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_BuildingReallyDamaged
	End
    
    ModelConditionState  = RUBBLE
		Model         = DBhouse1_D3
	End
		
	AnimationState = RUBBLE
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse1_D3.DBhouse1_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_StructureMediumCollapse
	End 	 
  End
End


;----

  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_STONE


	ArmorSet                              ; so its strong vs units but weak vs trolls, battering rams etc
		Conditions        = None
		Armor             = FortressArmor
		DamageFX          = GateDamageFX
	End

    WeaponSet
        Conditions     = NONE
        Weapon                = PRIMARY FortressArrowTowerBow                 ; fortress unupgraded arrow
	AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End 

    WeaponSet
        Conditions     = PLAYER_UPGRADE
        Weapon                = PRIMARY HaradrimPalaceBow                  ; fortress upgraded arrow
	AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End 




AddModule
	Behavior = GrantUpgradeCreate ModuleTag_abcdefghijkl
         UpgradeToGrant = Upgrade_MordorHaradrimPalaceLevel3
     End
End


RemoveModule ModuleTag_Draw_HCBanner

RemoveModule ModuleTag_DrawFloor 

RemoveModule BuildingModuleTag



ReplaceModule ModuleTag_05           ; higher health
	Body						= ActiveBody ModuleTag_05_DumbassNew
		MaxHealth				= 10000.0
		MaxHealthDamaged		= 6300.0
		MaxHealthReallyDamaged  = 3000.0
	End
End

ReplaceModule QueueProductionModuleTag 
	Behavior = QueueProductionExitUpdate QueueProductionModuleTagNew        ; this sets the exit point for created units
		PlacementViewAngle	= -180
		UnitCreatePoint		= X:42.0 Y:-17.0 Z:0.0
		NaturalRallyPoint	= X:75.0 Y:-32.0 Z:0.0
		ExitDelay			= STANDARD_HORDE_EXIT_DELAY
	End
End


	VoiceSelect						= MordorFortressSelect


AddModule
    Behavior            = GettingBuiltBehavior ModuleTag_GettingBuiltBehavior      ; so it automatically repairs if not under attack
        WorkerName    = ElvenWorkerNoSelect
        SpawnTimer    = 60000
    End
End




CommandSet = KeepCommandSet





AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= CommandSetKeepDwarves
	End
End


AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= CommandSetKeepMen
	End
End


AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= CommandSetKeepElves
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= CommandSetKeepIsengard
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= CommandSetKeepMordor
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= CommandSetKeepWild
	End
End





;------------------------------------------


ReplaceModule ModuleTag_DwarvenArcheryRangeLevel2
	Behavior = LevelUpUpgrade ModuleTag_DwarvenArcheryRangeLevel2New
		TriggeredBy		= Upgrade_KeepLevel2
		LevelsToGain	= 1
		LevelCap			= 3
	End
End
	

ReplaceModule ModuleTag_DwarvenArcheryRangeLevel3
	Behavior = LevelUpUpgrade ModuleTag_DwarvenArcheryRangeLevel3New
		TriggeredBy		= Upgrade_KeepLevel3
		LevelsToGain	= 1
		LevelCap			= 3
	End
End



RemoveModule ModuleTag_DwarvenArcheryRangeLevel2CommandSet


;scavenger doesnt works, so we added this

AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range			= 999999
		AllowSelf		= Yes
		ObjectFilter	= ALL
	End
End

	
AddModule
	Behavior = CastleUpgrade ModuleTag_PassOutFlamingMunitionsUpgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
		Upgrade		= Upgrade_GoodFortressFlamingMunitions
	End
End

AddModule
	Behavior = StatusBitsUpgrade ModuleTag_FakeOut ;// I need to react to the upgrade, so I can have it for when new construction asks me for all the upgrades
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitions
	End
End

AddModule
	Behavior = WeaponSetUpgrade ModuleTag_triggerweaponsetupgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
	End
End

End









;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================
;-----------------------------------------------LIGHTNING SECTION------------------------------------------
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=========================================================================================================

FXParticleSystem EOEDust
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    PerParticleAttachedSystem = EOEDustCore
    Lifetime = 100 100
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 2
    BurstCount = 25 50
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:100 G:230 B:76 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.2 0.3 0
    Alpha2 = -2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 15
    SizeRateDamping = 0.8 0.8
    AngleZ = 0 7
    AngularRateZ = -0.1 -0.1
    AngularDamping = 0.92 0.94
    Rotation = ROTATE_V
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.92 0.94
    DriftVelocity = X:0.032 Y:0.064 Z:0.15
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20 20
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 12
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EOEDustCore
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXCloud01.tga
    Lifetime = 100 100
    SystemLifetime = 15
    SortLevel = 1
    Size = 5 10
    BurstDelay = 20 20
    BurstCount = 1 1
    InitialDelay = 15 15
  End
  Color = DefaultColor
   Color1 = R:100 G:230 B:76 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.1 0.1 0
    Alpha2 = 0.2 0.2 5
    Alpha3 = 0 0 100
  End
  Update = DefaultUpdate
    SizeRate = 3 8
    SizeRateDamping = 0.9 0.85
    AngleZ = -0.25 0.25
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.95 0.94
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.92
    DriftVelocity = X:0 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Y = -1 2
    Z = 0 4
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 24
  End
  Draw = DefaultDraw
  End
End



FXParticleSystem EOEFinalLight
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:100 G:230 B:76 0
  End
  Update = DefaultUpdate
    SizeRate = 80 160
    SizeRateDamping = 0.8 0.7
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End





FXParticleSystem EOEFinalShockWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 40 40
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:100 G:230 B:76 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40

  End
  Update = DefaultUpdate
    SizeRate = 35 35
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End



FXList FX_EssenceOfElements

  ParticleSystem
    Name = EOEFinalLight
    CreateBoneOverride = B_HANDL
    Offset = X:0.0 Y:0.0 Z:50   ;Z:8.0
  End
  ParticleSystem
    Name = EOEFinalShockWave
    CreateBoneOverride = B_HANDL
    Offset = X:0.0 Y:0.0 Z:15.0
  End
  ParticleSystem
    Name = EOEDust
    CreateBoneOverride = B_HANDL
    Offset = X:0.0 Y:0.0 Z:10.0
  End


  CameraShakerVolume
    Radius = 900
    Duration_Seconds =1 
    Amplitude_Degrees = 5.0
  End

  Sound
    Name = SpellRainOfFirePlume
  End
End







FXList FX_EssenceOfElementsPreAttack


  CameraShakerVolume
    Radius = 500
    Duration_Seconds =3 
    Amplitude_Degrees = 2.0
  End

  Sound
     Name = Gui_CAH_SubtractPower
  End

End



Weapon EssenceOfElements
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_EssenceOfElementsPreAttack
	FireFX                = FX_EssenceOfElements
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 1000
		Radius			= 300.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount   = 80.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.5
		ShockWaveZMult    = 1.500
		ShockWaveSpeed	  = 700.0 
	End
End










Weapon Lightning'sSwordHit
	LeechRangeWeapon      = Yes
	AttackRange           = CREATE_A_HERO_ASSASSIN_RANGE
	MeleeWeapon           = Yes
	FireFX                = FX_GandalfSwordHit
	DelayBetweenShots     = CREATE_A_HERO_ASSASSIN_DELAYBETWEENSHOTS 			// time between shots, msec
	PreAttackDelay        = CREATE_A_HERO_ASSASSIN_PREATTACKDELAY 	// 400 is sword swing delay time before contact with target.
	PreAttackType         = PER_SHOT // Do the delay each time we attack a new target

	FiringDuration        = CREATE_A_HERO_ASSASSIN_FIRINGDURATION 	// Duration of the sword swing




	DamageNugget                // A basic Nugget that just does damage
		Damage					= 500
		Radius					= 0.0
		DelayTime				= 0
		DamageType				= MAGIC
		DamageFXType			= REFLECTED
		DeathType				= EXPLODED
	End




	DamageNugget                // A basic Nugget that just does damage
		Damage					= 3000
		Radius					= 0.0
		DelayTime				= 200
		DamageType				= HERO
		DamageFXType			= MAGIC 
		DeathType				= EXPLODED
	End




  MetaImpactNugget                    ; A Nugget that throws things back with force
		KillObjectFilter			= INSTANT_DEATH_ON_METAIMPACT_OBJFILTER
		SpecialObjectFilter			= SPELL_UNDERMINE_AFFECTS_OBJECT_FILTER
    ShockWaveAmount   = 110.0
    ShockWaveRadius   = 1.0
    ShockWaveTaperOff = 1
    ShockWaveZMult    = 1.20
  End


End


Weapon Lightning'sSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  FireFX                = FX_GondorSwordHit
  DelayBetweenShots     = 900 			; time between shots, msec
  PreAttackDelay        = 200 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 700 	; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 500
    Radius        = 5.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
End


Weapon Lightning'sSwordBig
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  FireFX                = FX_GondorSwordHit
  DelayBetweenShots     = 900 			; time between shots, msec
  PreAttackDelay        = 200 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 700 	; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250 ; same damage as normal weapon but bigger radius, due to the attributemodifier
    Radius        = 25.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = ELECTRIC
    DeathType     = BURNED
  End


	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= 100
                Radius        = 5.0			
		DamageType    		= FLAME
		DamageFXType  		= ELECTRIC
		DeathType     		= BURNED
                DamageSpeed             = 700.0
	End


	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount   = 30.0
		ShockWaveArc	  = 75
		ShockWaveRadius   = 20.0
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End

End




Weapon ElvenThranduilBow
	AttackRange         = THRANDUIL_BOW_RANGE	
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( THRANDUIL_BOW_RANGE .01 )  
	LeechRangeWeapon	= Yes
	
	WeaponSpeed         = 321         ; dist/sec 
	MinWeaponSpeed      = 241
	MaxWeaponSpeed      = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX              = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed    = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage       = 100     ;When this weapon is used it will hit exactly 50% of the time.
	HitStoredTarget = Yes	; Always hits initial target.
	;ScatterRadius       = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	
	DelayBetweenShots   = 0
	PreAttackDelay      = 300 ; ;ROHAN_ELVENWARRIOR_BOW_PREATTACKDELAY 
	PreAttackType       = PER_POSITION
	FiringDuration      = 0

	;OverrideVoiceAttackSound		= ElvenWarriorVoiceAttackBow
	  
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:1200 Max:1400
	ContinuousFireOne	= 0
	ContinuousFireCoast	= 200 ; ; THRANDUIL_RELOADTIME_MAX
	  
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= No ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent

	ProjectileNugget                    ; Default arrow
	    ProjectileTemplateName    = GoodFactionArrow
	    WarheadTemplateName       = ElvenThranduilBowWarhead
	    ForbiddenUpgradeNames   = Upgrade_RohanFireArrows
	End

End



FXParticleSystem AmuletOfPowerGlow
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGlow02.tga
    Lifetime = 5 5
    SortLevel = 1
    BurstCount = 2 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:254 G:144 B:64 0
    Color2 = R:0 G:0 B:0 5
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 8 8
    SizeRateDamping = 0.85 0.9
    AngleZ = 0 3
    AngularDamping = 1 1

    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.9
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -3 -3
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:3
  End
  Draw = DefaultDraw
  End
End



FXParticleSystem AmuletOfPowerGlowBlue
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGlow02.tga
    Lifetime = 5 5
    SortLevel = 1
    ;Size = 2 2
    BurstCount = 2 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:55 G:85 B:235 0
    Color2 = R:0 G:0 B:0 5
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 8 8
    SizeRateDamping = 0.85 0.9
    AngleZ = 0 3
    AngularDamping = 1 1

    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.9
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -3 -3
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:3
  End
  Draw = DefaultDraw
  End
End



FXParticleSystem AmuletOfPowerGlowGreen
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGlow02.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 2 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:75 G:255 B:55 0
    Color2 = R:0 G:0 B:0 5
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 8 8
    SizeRateDamping = 0.85 0.9
    AngleZ = 0 3
    AngularDamping = 1 1

    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.9
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -3 -3
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:3
  End
  Draw = DefaultDraw
  End
End

;----------------------------------------------------------------------------------------








FXParticleSystem LevelUpRingRed
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = EXLightRing.W3D
    Lifetime = 50 50
    SystemLifetime = 20
    SortLevel = 1
    Size = 0.1 0.1

    BurstDelay = 3 3
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:77 B:34 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.1 0.2 10
    Alpha3 = -0.2 0 50
  End
  Update = RenderObjectUpdate
    SizeRateX = 0.5 0.5
    SizeRateY = 0.5 0.5
    SizeRateZ = 0.5 1
    SizeDampingX = 0.85 0.85
    SizeDampingY = 0.85 0.85
    SizeDampingZ = 0.85 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End



FXParticleSystem LevelUpShaftsMotesRed
  System
    Priority = HIGH_OR_ABOVE
    ParticleName = EXMultiDot.tga
    Lifetime = 60 60
    SystemLifetime = 10
    SortLevel = 1
    Size = 30 40
    BurstCount = 1 5
  End
  Color = DefaultColor

    Color2 = R:255 G:77 B:34 30
    Color3 = R:0 G:0 B:0 60
    ColorScale = 0 1
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = 0.5 2
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:50
  End
  Draw = DefaultDraw
  End
End









FXList LightningLevelUpFX
  ParticleSystem
   Name = LevelUpRingRed
  End
  ParticleSystem
   Name = LevelUpShaftsMotesRed
  End
  Sound
     Name = HeroGenericLevelUp
  End
End




FXList FX_LightningDieToRespawn
  ParticleSystem
    Name = GandalfSwordHitSpark
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End

End




FXList FX_LightningInitialSpawn
  Sound
	Name = GenericRespawn1
  End
  Sound
	Name = HeroHaradrimVoiceSalute
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End



FXList FX_LightningRespawn
  Sound
	Name = GenericRespawn1
  End
  Sound
	Name = HeroHaradrimVoiceSalute
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End









FXParticleSystem FlamingSwordLightning
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGassmoke09.tga
    Lifetime = 7 7
    SortLevel = 1
    Size = 3 3
    BurstCount = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:170 G:84 B:29 7
    Color3 = R:0 G:0 B:0 12
    ColorScale = 2 2
  End
  Alpha = DefaultAlpha
    Alpha1 = 0 0 1
    Alpha2 = 1 1 10
    Alpha3 = 0 0 20
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.8 0.801
    AngularRateZ = 2 2
    AngularDamping = 1 1
    Rotation = ROTATE_Z
    AngleXY = 45 45
    AngularRateXY = 0.3 0.3
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.03
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
   StartPoint = X:-5 Y:0 Z:0
     EndPoint = X: 5 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End








;--------------------------------------------------------------------------------------------------------
SpecialPower SpecialAbilityLightningBladeMaster
	Enum					   = SPECIAL_HERO_MODE ;
	ReloadTime				   = 140000	;60000
	PreventActivationConditions	= HIDDEN
End



SpecialPower SpecialAbilitySwordStab
	Enum						= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime					= 200000
	PreventActivationConditions	= HIDDEN
End

SpecialPower SpecialAbilityWormtongueEscape
	Enum						=  SPECIAL_ELVEN_GRACE ;SPECIAL_GENERAL_TARGETLESS_TWO
	ReloadTime					= 180000 ; ;90000
	PreventActivationConditions	= HIDDEN
End




;SpecialPower SpecialAbilityActivateeDummy2
;	Enum						= SPECIAL_GENERAL_TARGETLESS_TWO
;	ReloadTime					= 1
;End
;
;
;SpecialPower SpecialAbilityActivateeDummy3
;	Enum						= SPECIAL_GENERAL_TARGETLESS_THREE
;	ReloadTime					= 1
;End



SpecialPower SpecialAbilityLightningAmuletOfPower
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 370000
End






ModifierList LightningStealthed
	Category	 = SPELL
	Modifier	 = INVULNERABLE 100%
        Modifier	 = VISION 120%
        Modifier	 = AUTO_HEAL 100%
	Duration	 = 30000					// Matches RefreshRate of giving	module
	ModelCondition   = HIDDEN
        ClearModelCondition = ATTACKING	 

End




ModifierList TroopsBonus ; not working exactly how i want
	Category = SPELL

	Modifier = ARMOR 20%		// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 120%	// Multiplicitive.  Damage multiplied by this, will compound in multiple bonuses
    	Modifier = RANGE 20% 		// Additive.
   	Modifier = VISION 120%		// Additive. 
        FX	 = FX_GenericDamageLeadership
	Duration = 30000
End






CommandButton Command_FiresOfDoom
	Command                 = SPECIAL_POWER 
	SpecialPower            = SpecialAbilityLightningAmuletOfPower
	Options                 = NONE
	TextLabel               = CONTROLBAR:AmuletOfPower
	RadiusCursorType		= NONE
	ButtonImage             = SBEvil_RainofFire
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipAmuletOfPower
	InPalantir				= Yes
        Radial                                  = No
	AutoAbility				= Yes
        DisableOnModelCondition         = HERO WEAPONSET_TOGGLE_1 HIDDEN
End











CommandButton Command_SpellBookEnshroudingMist
	Command					= SPECIAL_POWER
	SpecialPower			= SpecialAbilityWormtongueEscape 
	TextLabel				= CONTROLBAR:Vanish
	ButtonImage				= HSWormtongueEscape
	ButtonBorderType		= ACTION
        Options				= NONE
	DescriptLabel			= CONTROLBAR:TooltipVanish
        RadiusCursorType    = NONE
	InPalantir				= Yes
        Radial                          = No
        DisableOnModelCondition         = HERO
End


CommandButton Command_CreateAHero_CM_ToggleWeapon
	Command			   = TOGGLE_WEAPONSET 
	Options			   = UNMOUNTED_ONLY	TOGGLE_IMAGE_ON_WEAPONSET NEED_UPGRADE
	NeededUpgrade	   = Upgrade_CreateAHeroToggleWeapon
	FlagsUsedForToggle = WEAPONSET_TOGGLE_1
	TextLabel		   = CONTROLBAR:ToggleLightning'sWeapon
	ButtonImage		   = CAHEvilToggleWeapon 
	ButtonBorderType   = ACTION	
	DescriptLabel	   = CONTROLBAR:ToolTipToggleLightning'sWeapon
	InPalantir		   = Yes   
        DisableOnModelCondition         = HERO HIDDEN
End






MappedImage BCFarm
  ;Texture = BuildingRadialButtons_076.tga
  Texture = HeroUI_004.tga
  TextureWidth = 256
  TextureHeight = 256
  Coords = Left:192 Top:128 Right:256 Bottom:192
  Status = NONE
End






CommandButton Command_PorterConstructMenFarm ; evil hack with button image, see above
	Command					= SPECIAL_POWER
	SpecialPower			= SpecialAbilitySwordStab
	Options					= NEED_TARGET_ENEMY_OBJECT
        Object                          = NONE
	TextLabel				= CONTROLBAR:SwordHit
	DescriptLabel			= CONTROLBAR:ToolTipSwordHit
	ButtonImage				= HSWormtongueBackstab
	InvalidCursorName		= GenericInvalid
	CursorName				= EvilAbilityObj
	ButtonBorderType		= ACTION
	InPalantir				= Yes
	AutoAbility				= Yes
        Radial                                   = No
        DisableOnModelCondition         = WEAPONSET_TOGGLE_1 HIDDEN HERO
End


CommandButton Command_SpecialAbilityPhialOfGaladriel
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityLightningBladeMaster
  TextLabel               = CONTROLBAR:BladeMasterLightning
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipBladeMasterLightning
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  DisableOnModelCondition         = WEAPONSET_TOGGLE_1 HIDDEN
End

CommandSet  LightningCommandSet
1 = Command_ToggleStance
2 = Command_CreateAHero_CM_ToggleWeapon
3 = Command_SpecialAbilityPhialOfGaladriel
4 = Command_PorterConstructMenFarm
5 = Command_SpellBookEnshroudingMist
6 = Command_FiresOfDoom
End



;-------------------------------------------------------------------------------------------------------

Object GondorFaramir
End


ChildObject MordorGothmog GondorFaramir

  AddModule
	Behavior = GrantUpgradeCreate ModuleTag_GandalfWhite
		UpgradeToGrant = Upgrade_GandalfWhite ;
	End 
  End



ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_NewLook

ExtraPublicBone = B_HAND_R
ExtraPublicBone = B_HANDL

		DefaultModelConditionState
			Model               		= CHCM_FN_U_SKN
			Skeleton            		= CHCM_CM_U_SKL
			WeaponLaunchBone	= PRIMARY B_HAND_R
                        WeaponLaunchBone	= SECONDARY B_HANDL
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
			ParticleSysBone		= NONE Predator02 FollowBone:Yes Persist:HOLD PersistID:101

		END

		ModelConditionState		= HIDDEN
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
			ParticleSysBone		= NONE Predator02 FollowBone:Yes Persist:SPAWN PersistID:101
		End

//================== ANIMATIONS =================================================================


//----------- Climbing/rappelling ---------------
AnimationState						= CLIMBING WEAPONSET_TOGGLE_1
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= CHCM_CM_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing_WeaponToggle") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing_WeaponToggle
	Animation = Transition
		AnimationName = CHCM_CM_B_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= CLIMBING
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= CHCM_CM_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing
	Animation = Transition
		AnimationName = CHCM_CM_U_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= RAPPELLING WEAPONSET_TOGGLE_1
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= CHCM_CM_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
AnimationState						= RAPPELLING
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= CHCM_CM_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
TransitionState = Trans_ClimbingToRappelling
	Animation = Transition
		AnimationName = CHCM_CM_U_WALC
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning_WeaponToggle
	Animation = Transition
		AnimationName = MUGblnSwrd_B_WALE
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning
	Animation = Transition
		AnimationName = MUGblnSwrd_U_WALE
		AnimationMode = ONCE
	End
End
	



// --------- MOUNTED  ------------

// --- Dying Anims
AnimationState					=	DYING AFLAME MOUNTED
	Animation					=	Fire
		AnimationName			=	CHCM_CM_M_MFDA 
		AnimationSpeedFactorRange = 0.9 1.1
	End
	BeginScript
		CurDrawableHideSubObject("arrow") //Circumvents blend issues when the arrow is being shown...
	EndScript
End

AnimationState				=	DYING SPLATTED MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_LNDA
		AnimationMode		=	ONCE
	End
End
AnimationState        = DYING MOUNTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_M_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState				=	STUNNED_STANDING_UP MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_GTPA
		AnimationMode		=	ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState				=	STUNNED MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_LNDA
		AnimationMode		=	ONCE
	End
End

AnimationState				=	FREEFALL MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState				=	STUNNED_FLAILING MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState        = PASSENGER MOUNTED
	Animation
		AnimationName       = CHCM_CM_M_GBDA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = MOUNTED LEVELED	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = CHCM_CM_M_LVLA
		AnimationMode       = ONCE
	End
End

// --- Attacking Anims		
AnimationState				= FIRING_OR_PREATTACK_A MOUNTED	// Melee attack.
	Animation
		AnimationName		= CHCM_CM_M_ATKA CHCM_CM_M_ATKB
		AnimationMode		= ONCE
		UseWeaponTiming		= Yes
	End
End

// --- Moving Anims
AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
	Animation
		AnimationName		=	CHCM_CM_M_TNL1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
	Animation
		AnimationName		=	CHCM_CM_M_TNR1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOVING TURN_LEFT MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_TRNL
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING TURN_RIGHT MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_TRNR
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING ACCELERATE MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_ACCL
		AnimationMode		=	LOOP
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING DECELERATE MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_DECL
		AnimationMode		=	ONCE
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING WALKING MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_WLKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState				=	MOVING BACKING_UP MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_BAKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
	ShareAnimation		= Yes
	Animation
		AnimationName       = CHCM_CM_M_ATRA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART  
End

AnimationState				=	MOVING MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_RUNA
		AnimationMode		=	LOOP
	End
 	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None CalvaryDustTrails  
End

// --- Selected Anims
AnimationState				=	SELECTED MOUNTED
	SimilarRestart			=   Yes			
	StateName				=	AtAttentionIdleMounted
	Animation				=	ATNB
		AnimationName		=	CHCM_CM_M_ATNB
		AnimationMode		=	LOOP
	End
	BeginScript
		Prev = CurDrawablePrevAnimationState()
		if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
		if Prev == "AtAttentionIdleMounted" then CurDrawableSetTransitionAnimState("TRANS_Select") end
	EndScript
End

TransitionState				=	TRANS_Select
	Animation
		AnimationName		=	CHCM_CM_M_ATNA
		AnimationMode		=	ONCE
	End
End

// --- Idle Anims
AnimationState				= MOUNTED
	Animation
		AnimationName		=	CHCM_CM_M_IDLA
		AnimationPriority	=	20
		AnimationMode		=	ONCE
		AnimationBlendTime	=	15
	End
	Flags				=	RESTART_ANIM_WHEN_COMPLETE
End

// --------- UNMOUNTED  ------------

//------------------  DYING -------------------------------------------------------------

// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHCM_CM_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


// RAIN OF ARROWS SPECIAL POWER //
AnimationState				= PACKING_TYPE_1  WEAPONSET_TOGGLE_1
	StateName				= rainofarrows
	Animation
		AnimationName		= CHCM_CM_B_ATKA2
		AnimationMode		= LOOP
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// DOMINATE SPECIAL POWER //
AnimationState				= PACKING_TYPE_1
	StateName				= Curse
	Animation
		AnimationName		= CHCM_CM_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// TELEPORT SPECIAL POWER //
AnimationState				= PACKING_TYPE_3
	StateName				= Curse
	Animation
		AnimationName		= CHCM_CM_U_SPCA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

//--------------------- Wound Arrow anim
AnimationState        =  SPECIAL_WEAPON_TWO
	StateName = STATE_Bow
	Animation
		AnimationName       = CHCM_CM_U_SPCL CHCM_CM_U_ATKC
		AnimationMode       = ONCE
	End
	FrameForPristineBonePositions = 59
	BeginScript
		CurDrawableShowSubObject("arrow")
	EndScript
End
		
//------------------ ATTACKING --------------------------------------------------------------------
		// Attacking Anims [Weapon_A]
		
		
		
//		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
//			Animation           = TrotAndFire
//				AnimationName       = CHCM_CM_U_ATRA
//				AnimationMode       = LOOP
//			End
//			Flags               = RANDOMSTART
//			StateName = RunAndSwing
//		End
//		
//		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
//			StateName           = STATE_Sword
//			
//			Animation           = ATKD
//				AnimationName     = CHCM_CM_U_ATKD
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKE
//				AnimationName    = CHCM_CM_U_ATKE
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKF
//				AnimationName    = CHCM_CM_U_ATKF
//				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 1.47 1.47
//			End
//			Flags				=	RESTART_ANIM_WHEN_COMPLETE
//			//	FrameForPristineBonePositions = 59
//			BeginScript
//				Prev = CurDrawablePrevAnimationState()
//				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
//			EndScript
//		End

//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = CHCM_CM_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHCM_CM_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHCM_CM_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow
		AnimationState					=	PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	ReadyToDrawn
				AnimationName			=	CHCM_CM_B_ATKA1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				//AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	CHCM_CM_B_ATKA2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.1 1.1		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				//AnimationBlendTime		=	10
			End
		End


;;;;;;;;;;;;;;;;;;;;;;;;;;;; fixing bow attack anim bug - showing melee weapon right before each shoot for a second

		AnimationState					=	CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	CHCM_CM_B_ATKA1
				AnimationMode			=	MANUAL
			End
		End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

				
		//End New style firing
		//---------------------------------------------------

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation
				AnimationName		= CHCM_CM_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHCM_CM_U_ATKA1 CHCM_CM_U_ATKA CHCM_CM_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHCM_CM_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHCM_CM_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHCM_CM_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHCM_CM_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= CHCM_CM_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End

		// WORD OF POWER ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_ONE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
			//FXEvent			  =	Frame:5	Name:FX_GandalfPreAttackBlast
		End

		//	WIZARD BLAST ANIMS MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_TWO MOUNTED
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPLD CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End
	
		//	WIZARD BLAST ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_TWO
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPCB CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End

		//	ISTARI LIGHT STAFF WEAPON MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_THREE MOUNTED	// FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	CHCM_CM_U_SPCD CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End

		//	ISTARI LIGHT STAFF WEAPON ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_THREE // FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	CHCM_CM_U_SPCE CHCM_CM_U_ATKA//	isitari's light?
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	CHCM_CM_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHCM_CM_U_SPCC CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHCM_CM_U_SPCA CHCM_CM_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHCM_CM_U_SPCB CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	CHCM_CM_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHCM_CM_U_SPCC CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHCM_CM_U_SPCA CHCM_CM_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHCM_CM_U_SPCB CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = CHCM_CM_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = CHCM_CM_U_SPCE CHCM_CM_U_SPCA CHCM_CM_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHCM_CM_U_SPCC CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHCM_CM_U_SPCA CHCM_CM_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHCM_CM_U_SPCB CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 5
		
		//		AnimationState		  =	PACKING_TYPE_5 UNPACKING WEAPONSET_TOGGLE_1  
//			Animation		  
//				AnimationName =	CHCM_CM_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING WEAPONSET_TOGGLE_1
//			Animation		 
//				AnimationName =	CHCM_CM_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	CHCM_CM_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End
		
//		AnimationState		  =	PACKING_TYPE_5 UNPACKING	  
//			Animation		  
//				AnimationName =	CHCM_CM_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING
//			Animation		 
//				AnimationName =	CHCM_CM_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCB
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 6
//		AnimationState		  =	PACKING_TYPE_6 UNPACKING	  
//			Animation		  
//				AnimationName =	CHCM_CM_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_6 PREPARING
//			Animation		 
//				AnimationName =	CHCM_CM_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHCM_CM_B_CHRA CHCM_CM_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHCM_CM_U_CHRA CHCM_CM_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------

		// cheer, mounted
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
			Animation 
				AnimationName		=	CHCM_CM_M_CHRA CHCM_CM_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, w/ bow on foot
		AnimationState				=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHCM_CM_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_CHRB CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, mounted
		AnimationState				=	EMOTION_TAUNTING MOUNTED
			Animation 
				AnimationName		=	CHCM_CM_M_TNTA CHCM_CM_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, w/ bow on foot
		AnimationState				=	EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHCM_CM_B_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_TNTB CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
// 	Animation
// 		AnimationName				= RUMerry_CHRA
// 		AnimationMode				= ONCE
// 	End
// 	Animation
// 		AnimationName				= RUMerry_CHRB
// 		AnimationMode				= ONCE
// 	End
// 	Flags							= RESTART_ANIM_WHEN_COMPLETE
// End
// 
// AnimationState						= EMOTION_TAUNTING
// 	Animation
// 		AnimationName				= RUMerry_TNTB
// 		AnimationMode				= LOOP
// 	End
// End
// 
// AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
// 	StateName					= STATE_Ready_Rocks
// 	Animation					= IDLA
// 		AnimationName			= RUMerry_IDLA
// 		AnimationMode			= LOOP
// 	End
// End
// AnimationState					= EMOTION_ALERT
// 	StateName					= STATE_Ready_Sword
// 	Animation
// 		AnimationName			= RUMerry_IDLB
// 		AnimationMode			= LOOP
// 	End
// End
		


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHCM_CM_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled
		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	CHCM_CM_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       = CHCM_CM_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			//Animation = Foot_IDLD // Bored Fidget
			//	AnimationName       = CHCM_CM_U_IBFB
			//	AnimationMode       = ONCE
			//	AnimationPriority   = 1
			//End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHCM_CM_U_ATNA CHCM_CM_U_ATND CHCM_CM_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHCM_CM_U_ATNC CHCM_CM_U_ATNF CHCM_CM_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= CHCM_CM_U_ATNF CHCM_CM_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= CHCM_CM_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= CHCM_CM_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHCM_CM_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = CHCM_CM_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHCM_CM_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = CHCM_CM_U_STHB
				AnimationMode       = ONCE
			End
		End		

	End


End



AddModule
	Draw = W3DScriptedModelDraw FireBrand
		DefaultModelConditionState
			Model = CUFireBrand 
                        ParticleSysBone = PLANE02 FlamingSwordLightning FollowBone = Yes Persist:HOLD PersistID:80
		End




                ModelConditionState  =	SPECIAL_WEAPON_FIVE ; only when using sword hit show extra fire
			Model = CUFireBrand 
                        ParticleSysBone = PLANE02 FlamingSwordLightning FollowBone = Yes Persist:SPAWN PersistID:80
                End



		AttachToBoneInAnotherModule = B_HAND_R
	End
End

AddModule
	Draw = W3DScriptedModelDraw AmuletOfPowerYellow
		DefaultModelConditionState
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlow FollowBone = Yes Persist:SPAWN PersistID:100
		End

		ModelConditionState = WEAPONSET_TOGGLE_1
			Model = NONE
                        ParticleSysBone = PHIAL AmuletOfPowerGlow FollowBone = Yes Persist:HOLD PersistID:100
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlow FollowBone = Yes Persist:HOLD PersistID:100
		End


		ModelConditionState = SPECIAL_WEAPON_FOUR
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlow FollowBone = Yes Persist:HOLD PersistID:100

		End

		AttachToBoneInAnotherModule = B_HANDL
	End
End


AddModule
	Draw = W3DScriptedModelDraw AmuletOfPowerBlue
		DefaultModelConditionState
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowBlue FollowBone = Yes Persist:HOLD PersistID:100
		End

		ModelConditionState = WEAPONSET_TOGGLE_1
			Model = NONE
                        ParticleSysBone = PHIAL AmuletOfPowerGlowBlue FollowBone = Yes Persist:HOLD PersistID:100
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowBlue FollowBone = Yes Persist:SPAWN PersistID:100
		End


		ModelConditionState = SPECIAL_WEAPON_FOUR
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowBlue FollowBone = Yes Persist:HOLD PersistID:100

		End

		AttachToBoneInAnotherModule = B_HANDL
	End
End




AddModule
	Draw = W3DScriptedModelDraw AmuletOfPowerGreen
		DefaultModelConditionState
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowGreen FollowBone = Yes Persist:HOLD PersistID:100
		End

		ModelConditionState = WEAPONSET_TOGGLE_1
			Model = NONE
                        ParticleSysBone = PHIAL AmuletOfPowerGlowGreen FollowBone = Yes Persist:HOLD PersistID:100
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowGreen FollowBone = Yes Persist:HOLD PersistID:100
		End


		ModelConditionState = SPECIAL_WEAPON_FOUR
			Model = Cine_Phial
                        ParticleSysBone = PHIAL AmuletOfPowerGlowGreen FollowBone = Yes Persist:SPAWN PersistID:100

		End

		AttachToBoneInAnotherModule = B_HANDL
	End
End


	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    Lightning'sSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End	


	WeaponSet
		Conditions = WEAPONSET_HERO_MODE
		Weapon = PRIMARY    Lightning'sSwordBig
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1		
		Weapon = PRIMARY    ElvenThranduilBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1	WEAPONSET_HERO_MODE	
		Weapon = PRIMARY    ElvenThranduilBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	WeaponSet
		Conditions = HIDDEN
	End

	WeaponSet
		Conditions = HIDDEN WEAPONSET_TOGGLE_1
	End


	WeaponSet
		Conditions = HIDDEN WEAPONSET_HERO_MODE
	End

	WeaponSet
		Conditions = HIDDEN WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1
	End


	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 65
	End

	ArmorSet
		Conditions      = None
		Armor           = HeroArmor
		DamageFX        = NormalDamageFX
	End



	DisplayMeleeDamage = 500
	DisplayRangedDamage = 400

AddModule
	Behavior = SubObjectsUpgrade ModuleTag_HideStuff
	TriggeredBy		   = Upgrade_GandalfWhite
	HideSubObjects		   = CLUB_03 ; Commandant Club
	HideSubObjects		   = HMR_03 ; Hammer
	HideSubObjects		   = SWRD_03 ; Short Sword
	HideSubObjects		   = SWRD_04 ; Short Sword
	HideSubObjects		   = CMSword01 ;Sabre
	HideSubObjects		   = CMSword02 ;Small Halbred


	HideSubObjects		   = SLDR_01
	HideSubObjects		   = SLDR_02
	HideSubObjects		   = CHEST_01
	HideSubObjects		   = CHEST_02

	HideSubObjects		   = HLMT_01
	;HideSubObjects		   = HLMT_02
	HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_04
	HideSubObjects		   = HLMT_05

	;HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02

	;HideSubObjects		   = BOOT_01
	HideSubObjects		   = BOOT_02

	HideSubObjects		   = ARROW

	FadeTimeInSeconds      = 0.0
	End
End



  AddModule
	Behavior = SubObjectsUpgrade ReskinPhial
		TriggeredBy		= Upgrade_GandalfWhite
		UpgradeTexture		= RPPhial.tga		0  guporter_coals.tga
		RecolorHouse		= No
	End
  End


;------------------------------------------------------------------------------

RemoveModule ModuleTag_HorseToggle
RemoveModule ModuleTag_11
RemoveModule ModuleTag_FaramirLeadership
RemoveModule ModuleTag_KingsFavor


	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE NOTIFY_OF_PREATTACK ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
        Side = Mordor
        DisplayName = OBJECT:Lightning
	ButtonImage		= BMHaradrimPalace_SoldiersRhun
	SelectPortrait	= UPMordor_Eastering
        CommandPoints = 0
        PathfindDiameter = 10.0

			VoiceAttack 							= HeroHaradrimVoiceAttack
			VoiceAttackAir							= HeroHaradrimVoiceAttack
			VoiceAttackCharge 						= HeroHaradrimVoiceAttack
			VoiceAttackMachine 						= HeroHaradrimVoiceAttack
			VoiceAttackStructure 					= HeroHaradrimVoiceAttack
			VoiceCreated							= HeroHaradrimVoiceSalute
			VoiceFear								= HeroHaradrimVoiceHelpMe
			VoiceFullyCreated						= HeroHaradrimVoiceSalute
			VoiceGuard								= HeroHaradrimVoiceMove
			VoiceMove 								= HeroHaradrimVoiceMove
			VoiceMoveToCamp 						= HeroHaradrimVoiceMove
			VoiceMoveWhileAttacking 				= HeroHaradrimVoiceMove
			VoicePriority							= 95
			VoiceRetreatToCastle 					= HeroHaradrimVoiceMove
			VoiceSelect 							= HeroHaradrimVoiceSelectMS
			VoiceSelectBattle  						= HeroHaradrimVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroHaradrimVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroHaradrimVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroHaradrimVoiceMove
				VoiceEnterUnitTransportShip			= HeroHaradrimVoiceMove
				VoiceGarrison						= HeroHaradrimVoiceMove
				VoiceInitiateCaptureBuilding		= HeroHaradrimVoiceCaptureBuilding
			End


	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 2900	;BALANCE Faramir Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End





ReplaceModule ModuleTag_RespawnUpdate
	Behavior = RespawnUpdate ModuleTag_RespawnUpdateNew
		DeathAnim				= DYING				;Model condition to play when killed-to-respawn
		DeathFX				= FX_LightningDieToRespawn	;FXList to play when killed-to-respawn
		DeathAnimationTime		= 5000				;How long DeathAnim will take.
		InitialSpawnFX			= FX_LightningInitialSpawn
		RespawnAnim				= LEVELED				;Animation to play when respawning.
		RespawnFX				= FX_LightningRespawn		;FXList to play when respawning.
		RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= BMHaradrimPalace_SoldiersRhun
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No		Cost:1000		Time:20000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2				Cost:1000		Time:20000						; ;50% cost, 1x buildtime ;For other levels, only override what is different.
		RespawnEntry =	Level:3				Cost:1000 		Time:20000
		RespawnEntry =	Level:4				Cost:1000 		Time:20000
		RespawnEntry =	Level:5				Cost:1300		Time:50000						; ;65% cost, 2x buildtime
		RespawnEntry =	Level:6				Cost:1300		Time:50000
		RespawnEntry =	Level:7				Cost:1300		Time:50000
		RespawnEntry =	Level:8				Cost:1600		Time:110000 					; ;80% cost, 3x buildtime
		RespawnEntry =	Level:9				Cost:1600		Time:110000 
		RespawnEntry =	Level:10			Cost:1600		Time:110000 
	End
End





ReplaceModule ModuleTag_05
	Behavior = SlowDeathBehavior ModuleTag_05New
		DeathTypes = ALL 
		SinkDelay = 60000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 16000
		Sound = INITIAL HeroHaradrimVoiceDie
	End
End


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CommandSet = LightningCommandSet





AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_blabla
		SpecialPowerTemplate = SpecialAbilityLightningBladeMaster
		TriggeredBy = Upgrade_GandalfLightningSword
	End
End


AddModule
  	Behavior = SpecialPowerModule ModuleTag_blablastarter               ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityLightningBladeMaster
		StartsPaused			= Yes
	End
End



AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_blablaUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityLightningBladeMaster
		HeroAttributeModifier	= AragornBladeMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= GenericSpell
	End
End






AddModule
   Behavior = UnpauseSpecialPowerUpgrade ModuleTag_attackenable
	SpecialPowerTemplate = SpecialAbilitySwordStab
	TriggeredBy			 = Upgrade_LurtzLeadership
   End
End


AddModule
   Behavior = SpecialPowerModule ModuleTag_attackstarter
	SpecialPowerTemplate	 = SpecialAbilitySwordStab
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
	InitiateSound			 = HeroHaradrimVoiceAttack
   End
End


AddModule
   Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_attackupdate
	SpecialPowerTemplate = SpecialAbilitySwordStab
	UnpackTime			 = 1500
	PackTime			 = 2000	
	AwardXPForTriggering = 0
	StartAbilityRange	 = CREATE_A_HERO_ASSASSIN_DO_POWER_RANGE
	ApproachRequiresLOS	 = Yes
	SpecialWeapon		 = Lightning'sSwordHit
	WhichSpecialWeapon	 = 5

	LoseStealthOnTrigger = Yes
	PreTriggerUnstealthTime = 2100
   End
End





AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ElfCloakUnpause
		SpecialPowerTemplate		= SpecialAbilityWormtongueEscape
		TriggeredBy					= Upgrade_WormtongueEscape
	End
End



	Behavior = SpecialPowerModule ModuleTag_WormtongueVenomousWordsSpecialPower
		SpecialPowerTemplate		= SpecialAbilityWormtongueEscape
		StartsPaused				= Yes
		UpdateModuleStartsAttack	= Yes
	End

	Behavior = ActivateModuleSpecialPower ModuleTag_CloseTheGap
		SpecialPowerTemplate			= SpecialAbilityWormtongueEscape
		StartAbilityRange				= 200
		TriggerSpecialPower				= ModuleTag_Invulnerability    		
		TriggerSpecialPower				= ModuleTag_ElfCloakUpdate    
		TriggerSpecialPower				= ModuleTag_LightningHealPower   
                TriggerSpecialPower				= ModuleTag_CreateAHeroWTrueSightUpdate	
                TriggerSpecialPower				= ModuleTag_MightyRageDebuff	
	End




AddModule

	Behavior = SpecialPowerModule ModuleTag_Invulnerability                      
		SpecialPowerTemplate      = SpecialAbilityActivateeDummy
		UpdateModuleStartsAttack  = No
		AttributeModifier		  = LightningStealthed
		AttributeModifierAffectsSelf = Yes
		SetModelCondition		  = ModelConditionState:HIDDEN
		SetModelConditionTime	  = 30.0 ;2.5 ; in seconds
	End

End

	Behavior = PlayerHealSpecialPower ModuleTag_LightningHealPower
		SpecialPowerTemplate			= SpecialAbilityActivateeDummy
		HealAmount						= 0.3
		HealAsPercent					= Yes
		HealAffects						= HERO
		HealRadius						= 25
		HealFX							= FX_SpellHealUnitHealBuff
		;InitiateSound					= DainMightyRage
		TriggerFX						= FX_DainMightyRage02
	End



	Behavior = SpecialPowerModule ModuleTag_MightyRageDebuff
		SpecialPowerTemplate			= SpecialAbilityActivateeDummy
		AttributeModifier				= DainRageDeBuff
		AttributeModifierRange			= 300 ;
		AttributeModifierAffects		= GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
		AntiCategory					= LEADERSHIP BUFF
	End



AddModule ; not workin well
	Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate   
		SpecialPowerTemplate	= SpecialAbilityActivateeDummy
		EffectDuration		= 30000 ; ;15000
		ShowPalantirTimer		= Yes
	End
End

AddModule ; not workin
Behavior = StealthDetectorUpdate ModuleTag_CreateAHeroWTrueSightUpdate
	DetectionRange		= 700	// range to detect
	DetectionRate		= 100   // how often to rescan for stealthed things in my sight (msec)
	CancelOneRingEffect = Yes	// forces uses of one-ring to pop out of it
	InitiallyDisabled	= Yes
End
End



Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
	SpecialPowerTemplate = SpecialAbilityLightningAmuletOfPower
	TriggeredBy			 = Upgrade_GandalfWordOfPower
End

Behavior = SpecialPowerModule ModuleTag_WordStarter       
	SpecialPowerTemplate      = SpecialAbilityLightningAmuletOfPower
	UpdateModuleStartsAttack  = Yes
	StartsPaused		  	  = Yes
End

Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
	SpecialPowerTemplate	   = SpecialAbilityLightningAmuletOfPower
	WhichSpecialWeapon		   = 4 ; no properly anim for what i want, so i use this 
	SkipContinue			   = Yes
	UnpackTime				   = 1700 
	PackTime				   = 1	   
	FreezeAfterTriggerDuration = 2500 // Hold AI for this long after we	fire.
	AwardXPForTriggering	   = 0	   
	StartAbilityRange		   = 180.0
	SpecialWeapon			   = EssenceOfElements
	PlayWeaponPreFireFX		   = Yes
End







END



















;----------------------------------experience levels              

ExperienceLevel	GothmogLevel2
	TargetNames				= MordorGothmog
	RequiredExperience		= GOTHMOG_LVL2_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL2_EXP_AWARD
	AttributeModifiers		= HeroLevelUpDamage1
	Rank					= 2
        Upgrades                                = Upgrade_CreateAHeroToggleWeapon
	LevelUpFx				= FX:LightningLevelUpFX
	SelectionDecal
		Texture				= decal_hero_evil	
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	



ExperienceLevel GothmogLevel3
	TargetNames					= MordorGothmog
	RequiredExperience			= GOTHMOG_LVL3_EXP_NEEDED  
	ExperienceAward				= GOTHMOG_LVL3_EXP_AWARD
	AttributeModifiers			= HeroLevelUpDamage2
	Rank				        = 3
	Upgrades					= Upgrade_LurtzCarnage
	LevelUpFx					= FX:LightningLevelUpFX
;	Upgrades					= Upgrade_LurtzRampage
	SelectionDecal
		Texture				    = decal_hero_evil
		Style				    = SHADOW_ALPHA_DECAL
		OpacityMin				= 50%
		OpacityMax				= 100%
		MinRadius			    = 40
		MaxRadius			    = 200
		MaxSelectedUnits		= 40
	End	
End

ExperienceLevel GothmogLevel4
	TargetNames					= MordorGothmog
	RequiredExperience			= GOTHMOG_LVL4_EXP_NEEDED  
	ExperienceAward				= GOTHMOG_LVL4_EXP_AWARD
	AttributeModifiers			= HeroLevelUpDamage3
	Rank				        = 4
        Upgrades					= Upgrade_GandalfLightningSword
	LevelUpFx					= FX:LightningLevelUpFX
	SelectionDecal
		Texture				    = decal_hero_evil
		Style				    = SHADOW_ALPHA_DECAL
		OpacityMin				= 50%
		OpacityMax				= 100%
		MinRadius			    = 40
		MaxRadius			    = 200
		MaxSelectedUnits		= 40
	End	
End


ExperienceLevel	GothmogLevel5
	TargetNames					= MordorGothmog
	RequiredExperience			= GOTHMOG_LVL5_EXP_NEEDED  
	ExperienceAward				= GOTHMOG_LVL5_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage4
	Rank						= 5
	LevelUpFx					= FX:LightningLevelUpFX
	Upgrades				= Upgrade_LurtzLeadership
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END	

ExperienceLevel	GothmogLevel6
	TargetNames				= MordorGothmog
	RequiredExperience		= GOTHMOG_LVL6_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL6_EXP_AWARD	
	AttributeModifiers		= HeroLevelUpDamage5
	Rank					= 6
	Upgrades				= Upgrade_LurtzPillage
	LevelUpFx				= FX:LightningLevelUpFX
	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	GothmogLevel7
	TargetNames				= MordorGothmog	
	RequiredExperience		= GOTHMOG_LVL7_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL7_EXP_AWARD	
	AttributeModifiers		= HeroLevelUpDamage6
	Rank					= 7
	LevelUpFx				= FX:LightningLevelUpFX
        Upgrades                                = Upgrade_WormtongueEscape

	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	GothmogLevel8
	TargetNames				= MordorGothmog
	RequiredExperience		= GOTHMOG_LVL8_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL8_EXP_AWARD	
	AttributeModifiers		= HeroLevelUpDamage7
	Rank					= 8
	LevelUpFx				= FX:LightningLevelUpFX
	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	

END	

ExperienceLevel	GothmogLevel9
	TargetNames				= MordorGothmog
	RequiredExperience		= GOTHMOG_LVL9_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL9_EXP_AWARD	
	;AttributeModifiers		= HeroLevelUpDamage8
	Rank					= 9
	LevelUpFx				= FX:LightningLevelUpFX
	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	GothmogLevel10
	TargetNames				= MordorGothmog
	RequiredExperience		= GOTHMOG_LVL10_EXP_NEEDED  
	ExperienceAward			= GOTHMOG_LVL10_EXP_AWARD	
	AttributeModifiers		= HeroLevelUpDamage9 LurtzPassiveOutlawLeadership

	Upgrades				= Upgrade_GandalfWordOfPower
	Rank					= 10
	LevelUpFx				= FX:LightningLevelUpFX
	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	


